<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Microcart</title>


<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <!-- Vue Router CDN -->
  <script src="https://unpkg.com/vue-router@4"></script>

  <!-- Axios CDN -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">


  <style>
  /*  Body  */
body {
font-family: 'Poppins', sans-serif;
margin: 0;
padding: 0;
background: #f9f9f9; /* light by default */
color: #111;
transition: background 0.3s ease, color 0.3s ease;
}





.top-header {
display: flex;
align-items: center;
justify-content: space-between; /* Ensures spacing */
padding: 12px 16px;
border-bottom: 1px solid #333;
margin-bottom: 25px;
position: relative;
z-index: 20;
}

.logo {
  font-size: 22px;
  font-weight: 900;
  color: lightgrey; /* Primary fill color */
  font-family: 'Poppins', sans-serif;
  letter-spacing: 1px;
  animation: flicker 3s infinite alternate;
  cursor: pointer;

  -webkit-text-stroke: 1.2px green; /* Magenta border */
  text-shadow: 0 0 2px green; /* Optional glowing accent */
}


    
.img {
width: 114px; /* Shrinks the image width */
height: 114px; /* Matches the height for a square shape */
border-radius: 50%; /* Makes it perfectly circular */
object-fit: cover; /* Ensures the image fills the space nicely */
margin: 5px auto; /* Centers the image horizontally */
display: block; /* Ensures it behaves like a block element */
}
   
   
  


.store-search {
  flex: 1;
  display: flex;
  align-items: center;
  background-color: #f8f8f8;
  border-radius: 30px;
  padding-top: 8px;
padding-bottom: 8px;
  position: relative;
  width: 98%;
  border-bottom: 1.5px solid #00b36b;
 border-top: 1.5px solid #00b36b;
 border-right: 1px solid #00b36b;
  border-left: 1px solid #00b36b;
  margin-left: 10px;
  margin-top: 5px;
  
}

.search-input {
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  font-size: 14px;
  color: #222;
  font-family: 'Poppins', sans-serif;
  margin: 0 6px;
}

.search-svg {
  cursor: pointer;
}

.hamburger-icon {
  cursor: pointer;
  width: 33px;
  height: 25px;
  display: flex;
  align-items: center;
stroke-width: 2;
stroke: #00b36b; /* magenta accent */
  justify-content: center;
  border-radius: 10px;
  padding: 2.8px;
  transition: transform 0.2s ease;
  margin-top: 3px;
}

.hamburger-icon:hover {
  transform: scale(1.05);
}

.hamburger-svg rect {
  fill: #ffffff; /* subtle white bars */
  transition: fill 0.2s ease;
}

.hamburger-icon:hover .hamburger-svg rect {
fill: #00b36b; /* magenta accent on hover */
}


   


.ham-page {
font-family: 'Segoe UI', sans-serif;
background-color: #f9f9f9;
color: #333;
padding: 16px;
min-height: 100vh;
}

/* Header Section */
.ham-header {
display: flex;
align-items: center;
justify-content: space-between;
padding-bottom: 12px;
border-bottom: 2px solid #00b36b;
margin-bottom: 20px;
}

.ham-title {
font-size: 1.5rem;
font-weight: bold;
color: #00b36b;
}

/* Back Icon */
.back-icon {
cursor: pointer;
padding: 8px;
display: flex;
align-items: center;
justify-content: center;
width: 40px;
height: 40px;
border-radius: 50%;
background-color: #e6fff2;
transition: transform 0.2s ease, background-color 0.2s ease;
}
.back-icon:hover {
transform: scale(1.1);
background-color: #00b36b;
}
.back-icon:hover svg {
stroke: white;
}

/* Menu Grid */
.menu-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
gap: 16px;
}

/* Menu Cards */
.menu-card {
background-color: white;
border: 2px solid #00b36b;
border-radius: 12px;
padding: 16px;
text-align: center;
box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
transition: all 0.3s ease;
cursor: pointer;
}
.menu-card:hover {
background-color: #00b36b;
color: white;
transform: translateY(-4px);
}
.menu-card:active {
box-shadow: 0 0 12px #00b36b;
transform: scale(0.98);
}

/* Menu Icons */
.menu-icon {
margin-bottom: 8px;
}
.menu-icon svg {
width: 32px;
height: 32px;
stroke: #009e5f;
transition: stroke 0.3s ease;
}
.menu-card:hover.menu-icon svg {
stroke: white;
}

/* Menu Labels */
.menu-card span {
font-weight: 600;
font-size: 0.95rem;
}

/* Modal Overlay with Blur */
.modal-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
backdrop-filter: blur(6px);
background-color: rgba(0, 0, 0, 0.3);
display: flex;
align-items: center;
justify-content: center;
z-index: 1000;
}

/* Modal Content */
.modal-content {
background: white;
border-radius: 12px;
padding: 24px;
width: 90%;
max-width: 420px;
box-shadow: 0 0 20px rgba(0, 179, 107, 0.4);
animation: fadeIn 0.3s ease-in-out;
position: relative;
}

/* Modal Header */
.modal-header {
font-size: 1.4rem;
font-weight: bold;
color: #00b36b;
margin-bottom: 16px;
text-align: center;
}

/* Modal Close Button */
.modal-close {
position: absolute;
top: 12px;
right: 12px;
background: transparent;
border: none;
font-size: 20px;
cursor: pointer;
color: #00b36b;
}

/* Modal Inputs */
.modal-content input {
width: 100%;
padding: 10px 10px;
margin-bottom: 12px;
border: 1.5px solid #00b36b;
border-radius: 8px;
font-size: 14px;
font-family: 'Poppins', sans-serif;
transition: border-color 0.3s ease, box-shadow 0.3s ease;

}
.modal-content input:focus {
  border-color: #00b36b;
  box-shadow: 0 0 4px #00b36b;
  outline: none;
}

/* Modal Buttons */
.modal-content button{
width: 100%;
padding: 10px;
background-color: #00b36b;
color: white;
border: none;
border-radius: 8px;
font-weight: 600;
font-size: 14px;
cursor: pointer;
transition: background 0.3s ease;
}
.modal-content button:hover {
background-color: #009e5f;
}

/* Fade-in Animation */
@keyframes fadeIn {
from {
opacity: 0;
transform: scale(0.95);
}
to {
opacity: 1;
transform: scale(1);
}
}


.signup-page {
  max-width: 400px;
  margin: 60px auto;
  padding: 24px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 0 12px rgba(0, 179, 107, 0.2);
  font-family: 'Poppins', sans-serif;
}

.signup-title {
  text-align: center;
  color: #00b36b;
  margin-bottom: 20px;
}

.signup-page input {
  width: 92%;
  padding: 12px;
  margin-bottom: 14px;
  border: 1.5px solid #00b36b;
  border-radius: 8px;
  font-size: 14px;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.signup-page input:focus {
  border-color: #00b36b;
  box-shadow: 0 0 4px #00b36b;
  outline: none;
}

.signup-page button {
  width: 100%;
  padding: 12px;
  background-color: #00b36b;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 15px;
  cursor: pointer;
  transition: background 0.3s ease;
}

.signup-page button:hover {
  background-color: #009e5f;
}


.logo-upload {
  text-align: center;
  margin-bottom: 20px;
}

.logo-preview-wrapper {
  display: flex;
  justify-content: center;
  margin-bottom: 10px;
}

.logo-preview {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #00b36b;
  box-shadow: 0 0 6px rgba(0, 179, 107, 0.2);
}

.upload-btn {
  background-color: #009e5f;
  color: #fff;
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
}

.password-wrapper {
  position: relative;
}

.password-wrapper input {
  width: 92%;
  padding-right: 12px;
}

.toggle-eye {
  position: absolute;
  right: 10px;
  top: 10px;
  cursor: pointer;
  color: #00b36b;
}



.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.spinner {
  border: 4px solid #e0e0e0;
  border-top: 4px solid #00b36b;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}



   
.login-link {
  text-align: center;
  margin-top: 16px;
  font-size: 13px;
}

.login-link a {
  color: #00b36b;
  text-decoration: none;
}

 
/* Grid container for storefront cards */
.storefront-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  padding: 20px 0;
}

/* Storefront card styling */
.storefront-card {
  border: 1px solid #ddd;
  border-radius: 12px;
  padding: 16px;
  background-color: #f9f9f9;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
  transition: transform 0.2s ease;
}

.storefront-card:hover {
  transform: translateY(-4px);
}

.brand-bar {
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  font-size: 18px;
  margin-bottom: 12px;
}

.arrow {
  margin: 0 8px;
  color: #888;
}

.logo-circle {
  width: 100px;
  height: 100px;
  margin: 0 auto 12px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid #ccc;
}

.logo-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.visit-btn {
  background-color: #4CAF50;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
}

.visit-btn:hover {
  background-color: #45a049;
}



.store-location {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  color: #555;
  margin-bottom: 10px;
}

.store-location svg {
  width: 16px;
  height: 16px;
  fill: #e74c3c;
}

.location-ghost {
  padding: 2px 6px;
  background-color: #eee;
  color: #aaa;
  border-radius: 6px;
  font-size: 12px;
  font-style: italic;
}


.placeholder-card {
  background-color: #eee;
  color: transparent; /* hides text */
  pointer-events: none;
  animation: pulse 1.5s infinite;
}

.placeholder-card .logo-circle,
.placeholder-card .store-location,
.placeholder-card .brand-bar {
  background-color: #ddd;
  border-radius: 6px;
}

@keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.4; }
  100% { opacity: 1; }
}





/* Centered "No results found" message */
.no-results {
  text-align: center;
  font-size: 18px;
  color: #666;
  padding: 40px 0;
}

/* Optional: Loading message styling */
.loading-message {
  text-align: center;
  font-size: 16px;
  color: #999;
  padding: 20px 0;
}


/*Upgrades  Page*/
.future-upgrades-page {
  padding: 16px;
}

.upgrade-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 16px;
  margin-top: 20px;
}

.upgrade-card {
  border: 1px solid #00b36b;
  border-radius: 10px;
  padding: 16px;
  transition: box-shadow 0.3s ease;
}
.upgrade-card:hover {
  box-shadow: 0 0 0 2px #00b36b;
}

.upgrade-icon svg {
  width: 32px;
  height: 32px;
  margin-bottom: 10px;
}

.upgrade-card h3 {
  margin: 0 0 6px;
}

/*FAQS Page*/
  .faqs-page {
    padding: 16px;
    
    min-height: 100vh;
  }
  .faq-section h3 {
    color: #4CAF50;
    margin-top: 20px;
  }
  
  .faq-item {
    
    margin: 10px 0;
    border-radius: 6px;
    overflow: hidden;
  }
  
  .question {
    padding: 12px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
.answer {
  padding: 12px;
  font-size: 14px;
  background: #222;
  color: #ccc;
}


/* Support / Donation Page */
.support-header {
font-size: 24px;
color: #00b36b;
font-family: 'Poppins', sans-serif;
text-align: center;
margin-bottom: 10px;
}

.support-intro {
text-align: center;
font-size: 14px;
margin-bottom: 20px;
padding: 0 12px;
font-family: 'Poppins', sans-serif;
}

.donate-toggle-btn {
background-color: #00b36b;
border: none;
border-radius: 8px;
padding: 10px 16px;
font-weight: bold;
margin: 0 auto;
display: flex;
align-items: center;
gap: 8px;
font-family: 'Poppins', sans-serif;
cursor: pointer;
transition: background 0.2s ease-in-out;
}

.donate-toggle-btn:hover {
background-color: #00b36b;
}

.donate-options {
margin-top: 16px;
text-align: center;
}

.donate-btn-group {
display: flex;
flex-direction: column;
gap: 10px;
margin: 10px auto;
width: 70%;
}

.donate-btn {
background-color: #111;
border: 1.5px solid #00b36b;
color: #00b36b;
border-radius: 6px;
padding: 10px;
font-family: 'Poppins', sans-serif;
font-weight: 500;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
transition: background 0.2s ease-in-out;
}

.donate-btn:hover {
background-color: #00b36b;
}

.donate-note {
font-size: 12px;
margin-top: 12px;
font-style: italic;
}

.other-support h3 {
margin-top: 30px;
text-align: center;
color: #00b36b;
font-family: 'Poppins', sans-serif;
}

.other-support ul {
list-style: none;
padding: 0;
margin-top: 10px;
}

.other-support li {
padding: 10px 14px;
border-bottom: 1px solid #444;  
font-size: 14px;
display: flex;
align-items: center;
gap: 10px;
font-family: 'Poppins', sans-serif;
}



/* Store Page  */

   

/* ========== Variables ========== */
:root{
  --bg: #f7f8fa;
  --card-bg: #ffffff;
  --muted: #6b7280;          /* medium gray */
  --primary: #0ea5a4;        /* teal-ish */
  --accent: #ef4444;         /* red for errors/important */
  --shadow: 0 6px 18px rgba(12, 18, 26, 0.08);
  --glass: rgba(255,255,255,0.85);
  --radius-lg: 14px;
  --radius-md: 10px;
  --radius-sm: 6px;
  --gap: 12px;
  --max-width: 1200px;
  --text: #111827;
  --toast-z: 9999;
  --modal-z: 9998;
  --transition-fast: 180ms;
  --transition-medium: 300ms;
}

/* ========== Reset / Base ========== */
*{box-sizing:border-box}
html,body,#app{height:100%}
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.35;
  -webkit-tap-highlight-color: transparent;
}

/* ========== Page Wrapper (optional) ========== */
.store-page {
  max-width: var(--max-width);
  margin: 18px auto;
  padding: 0 16px;
}

/* ========== Top Header ========== */
.top-headerX {
  display:flex;
  align-items:center;
  gap: 12px;
  padding: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.72));
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  position: sticky;
  top: 12px;
  z-index: 30;
}

.top-headerX > div:first-child{
  display:flex;
  align-items:center;
  justify-content:center;
  width:36px;
  height:36px;
  cursor:pointer;
  border-radius:8px;
}
.top-headerX > div:first-child svg{display:block}

/* Logo & Name */
.store-logoX{
  width:46px;
  height:46px;
  object-fit:cover;
  border-radius:10px;
  border: 1px solid rgba(0,0,0,0.06);
  background: #fff;
}
.nameX{
  margin:0;
  font-size:1.05rem;
  font-weight:600;
  color:var(--text);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  max-width: 55%;
}

/* Right icons */
.icons-right{
  margin-left:auto;
  display:flex;
  align-items:center;
  gap: 10px;
}
.cart-icon, .share-icon{
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:38px;
  height:38px;
  border-radius:10px;
  cursor:pointer;
  transition: transform var(--transition-fast) ease, background var(--transition-fast);
}
.cart-icon:focus, .share-icon:focus,
.cart-icon:hover, .share-icon:hover { transform: translateY(-2px); outline:none; }

/* cart count badge */
.cart-count{
  position:absolute;
  top: -6px;
  right: -6px;
  min-width:18px;
  height:18px;
  padding: 0 4px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:9px;
  background:var(--accent);
  color:white;
  font-size:11px;
  font-weight:700;
  box-shadow:0 2px 6px rgba(0,0,0,0.12);
}

/* ========== Search Input ========== */
.search-inputX{
  width:100%;
  display:block;
  margin: 14px 0;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid rgba(16,24,40,0.06);
  background: white;
  font-size: 14px;
  box-shadow: 0 1px 4px rgba(12,18,26,0.02);
}
.search-inputX:focus{
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 6px 18px rgba(14,165,164,0.08);
}

/* ========== Product Grid ========== */
.product-grid{
  display:grid;
  gap: 16px;
  grid-template-columns: repeat( auto-fill, minmax(200px, 1fr) );
  margin-bottom: 24px;
}

/* Product Card */
.product-card{
  background: var(--card-bg);
  border-radius: 12px;
  padding: 10px;
  box-shadow: var(--shadow);
  display:flex;
  flex-direction:column;
  gap:2px;
  min-height: 180px;
  transition: transform var(--transition-fast) ease, box-shadow var(--transition-fast);
}
.product-card:hover{ transform: translateY(-6px) }

/* Product Image */

.product-img {
  width: 100%;
  height: 180px;
  object-fit: cover;
  border-radius: 6px;
  margin-bottom: 8px;
display: block;
background: linear-gradient(90deg, rgba(0, 0, 0, 0.03), rgba(0, 0, 0, 0.01));
}



/* Thumbnail Row */
.thumbnail-row{
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:flex-start;
  overflow-x:auto;
  padding-bottom:6px;
}
.thumbnail{
  width:40px;
  height:36px;
  object-fit:cover;
  border-radius:6px;
  cursor:pointer;
  border:2px solid transparent;
  opacity: 0.95;
  flex: 0 0 auto;
}
.thumbnail.active{
  border-color: var(--primary);
  transform: translateY(-2px);
  box-shadow: 0 6px 14px rgba(14,165,164,0.08);
}

/* Text */
.product-title{
  font-size: 14px;
  font-weight:600;
  margin:0;
  color:var(--text);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.product-price{
  margin:0;
  font-weight:700;
  color: #0f766e;
  font-size: 15px;
}

/* Buttons */
.view-btn {
  padding: 6px 2px;
  width:100%;
  background-color: #4caf50;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.view-btn:hover {
  background-color: #45a049;
}


.view-btn:active{ transform: translateY(1px) }
.view-btn:focus{ outline: 2px dashed rgba(14,165,164,0.25); outline-offset:2px }

/* ========== Modal ========== */
/* overlay */
.modal-overlayX{
  position:fixed;
  inset:0;
  background: rgba(4,8,20,0.45);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: var(--modal-z);
  padding: 24px;
  animation: fadeIn 240ms ease;
}

/* dialog */
.modal-contentX{
  width:100%;
  max-width: 820px;
  border-radius: var(--radius-lg);
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96));
 padding: 18px;
  box-shadow: 0 20px 60px rgba(4,8,20,0.28);
  position: relative;
  display:grid;
  gap:12px;
  grid-template-columns: 1fr 320px;
}

/* For small screens modal becomes vertical */
@media (max-width: 780px){
  .modal-contentX{ grid-template-columns: 1fr; padding:14px; max-height: calc(100vh - 60px); overflow:auto; }
  .product-img, .modal-image{ height: 240px }
}

/* modal image */
.modal-image{
  display:block;
  width:100%;
  height:300px;
  object-fit:contain; /* keep entire product visible */
  border-radius: 10px;
background: #f8fafc;
}

/* modal thumbnail row */
.modal-thumbs .thumbnail{
  width:54px;
  height:46px;
}
.modal-thumbs .thumbnail.active{ border-width:2px }
   
.thumbnail:hover {
  opacity: 1;
  transform: scale(1.05);
}

/* info section */
.info-section{
  padding: 8px 6px;
  font-size: 14px;
  color: var(--muted);
}
.info-section p{ margin:8px 0; color:var(--text) }

/* action buttons */
.action-buttons{
  display:flex;
  gap:10px;
  margin-top: 8px;
  flex-wrap:wrap;
  height: 22.5px;
}
.btn-primaryX, .btn-callX, .btn-closeX{
  padding:4px 10px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  min-width:fit-content;
}
.btn-primaryX{
  background: linear-gradient(90deg, var(--primary), #06b6d4);
  color:white;
}
.btn-callX{
  background: #fff;
  border: 1px solid rgba(12,18,26,0.06);
  color:var(--text);
}
.btn-closeX{
  background: transparent;
  color:var(--muted);
}


/* ========== Toast ========== */


.toast-container{
  position: fixed;
  
  right: 18px;
  bottom: 18px;
  z-index: var(--toast-z);
  display:flex;
  flex-direction:column;
  gap: 8px;
  align-items:flex-end;
}
.toast {
  position: fixed;
  top:20px;
  left: 50%;
  transform: translateX(-50%);
  padding: 10px 18px;
  border-radius: 8px;
  color: #fff;
  font-size: 12px;
  z-index: 9999;
  animation: fadeInOut 2s ease;
}
.toast.success { background: #28a745; }
.toast.error { background: #dc3545; }
.toast.info { background: #007bff; }

@keyframes fadeInOut {
  0% { opacity: 0; transform: translate(-50%, 20px); }
  10%, 90% { opacity: 1; transform: translate(-50%, 0); }
  100% { opacity: 0; transform: translate(-50%, -20px); }
}


/* ========== Loading Overlay ========== */
.loading-overlay{
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.6);
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius: inherit;
}
.spinner{
  width:36px;
  height:36px;
  border-radius:50%;
  border:4px solid rgba(16,24,40,0.08);
  border-top-color: var(--primary);
  animation: spin 900ms linear infinite;
}

/* ========== No Results text ========== */
.no-results, p[v-cloak] {
  color: var(--muted);
  margin: 18px 0;
  text-align:center;
  font-weight:600;
}

/* ========== Helpers ========== */
.visually-hidden{
  position:absolute!important;
  height:1px;
  width:1px;
  overflow:hidden;
  clip:rect(1px,1px,1px,1px);
  white-space:nowrap;
  border: 0;
  padding: 0;
  margin:-1px;
}

/* ========== Animations ========== */
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes slideIn{ from{ transform: translateY(6px) scale(.98); opacity:0 } to{ transform: translateY(0) scale(1); opacity:1 } }
@keyframes fadeIn{ from{ opacity:0 } to{ opacity:1 } }

/* ========== Responsive tweaks ========== */
@media (max-width: 640px){
  .top-headerX{ padding:10px; gap:8px }
  .product-grid{ gap:12px; grid-template-columns: repeat( auto-fill, minmax(160px, 1fr) ); }
  .product-img{ height:140px }
  .nameX{ font-size:0.98rem; max-width: 45% }
}

.product-actions {
display: flex;
align-items: center;
justify-content: space-between;
margin-top: 10px;
}



/*  Add to cart Page  */
.cart-page {
  padding: 20px;
  max-width: 600px;
  margin: auto;
}

.cart-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.cart-item {
  display: flex;
  align-items: center;
  border: 1px solid #ddd;
  padding: 10px;
  border-radius: 12px;
  background: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.cart-img {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 10px;
  margin-right: 10px;
}

.cart-details {
  flex: 1;
}

.quantity-control {
  display: flex;
  align-items: center;
  gap: 10px;
}

.quantity-control button {
  padding: 5px 10px;
  border: none;
  background: #007bff;
  color: white;
  border-radius: 6px;
  cursor: pointer;
}

.remove-btn {
  margin-top: 10px;
  background: #e63946;
  color: #fff;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
}

.cart-summary {
  margin-top: 20px;
  padding: 15px;
  background: #fafafa;
  border-radius: 10px;
  text-align: center;
}

.cart-actions {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  margin-top: 10px;
}

.checkout-btn {
  background: #28a745;
  color: #fff;
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
}

.clear-btn {
  background: #ff6b6b;
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
}

.empty-cart {
  text-align: center;
  margin-top: 40px;
  color: #777;
}


.modal-overlayY {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
  animation: fadeIn 0.3s ease;
}

.modal-contentY {
  background: #fff;
  padding: 20px;
  border-radius: 14px;
  width: 90%;
  max-width: 400px;
  text-align: center;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  animation: slideUp 0.35s ease;
}

.modal-contentY h3 {
  margin-bottom: 15px;
  font-size: 18px;
  font-weight: 600;
}

.modal-contentY ul {
  list-style: none;
  padding: 0;
  margin: 10px 0;
  text-align: left;
  font-size: 14px;
  color: #333;
}

.whatsapp-contact {
  background: #f7f7f7;
  border-radius: 8px;
  padding: 10px;
  margin-top: 15px;
  font-size: 14px;
}

.whatsapp-number {
  display: inline-block;
  margin-top: 4px;
  font-weight: 600;
  color: #25D366;
}

.modal-buttons {
  display: flex;
  justify-content: space-around;
  gap: 10px;
  margin-top: 18px;
}

.modal-continue-btnY {
  background: #25D366;
  color: white;
  border: none;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  flex: 1;
  transition: background 0.25s;
}

.modal-continue-btnY:hover {
  background: #20b85b;
}

.modal-cancel-btnY {
  background: #ccc;
  color: #333;
  border: none;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  flex: 1;
  transition: background 0.25s;
}

.modal-cancel-btnY:hover {
  background: #b3b3b3;
}

/* === Animations === */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}







.not-foundX {
  text-align: center;
  color: #999;
  font-size: 15px;
  margin-top: 40px;
  font-weight: 500;
  letter-spacing: 0.3px;
  animation: fadeIn 0.4s ease-in;
}

/* Optional: subtle fade-in animation */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Optional dark mode support */
@media (prefers-color-scheme: dark) {
  .not-foundX {
    color: #bbb;
  }
}




@media (prefers-color-scheme: dark) {
  body { background:black; color: black; }
  .product-card, .modal-contentX {  color: black;}
  .search-inputX { background: #222; color: #eee; border-color: #333; }
}




.no-image-placeholder {
  width: 100%;
  height: 200px; /* adjust if your product image uses a different height */
  border-radius: 10px;
  background: linear-gradient(135deg, #f2f2f2, #e6e6e6);
  color: #999;
  font-size: 14px;
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border: 1px dashed #ccc;
  box-sizing: border-box;
  transition: background 0.3s ease, color 0.3s ease;
}

.no-image-placeholder:hover {
  background: linear-gradient(135deg, #eaeaea, #f9f9f9);
  color: #777;
}




/* Post Page */
.media-uploader {
padding: 28px;
max-width: 750px;
margin: auto;
font-family: 'Segoe UI', sans-serif;
background: #fff;
border-radius: 12px;
box-shadow: 0 4px 12px rgba(0,0,0,0.06);
}





.media-preview {
height: 280px;
border-radius: 10px;
overflow: hidden;
position: relative;
}

.media-img {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
object-fit: contain;
transition: opacity 0.3s ease-in-out;
opacity: 1;
}




.placeholder {
color: #999;
font-size: 14px;
text-align: center;
padding: 20px;
margin-top: 100px;
}




.toggle-icon {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 20px;
  background: rgba(0, 0, 0, 0.5);
  color: white;
  padding: 6px;
  border-radius: 50%;
  cursor: pointer;
}

.carousel-dots {
  display: flex;
  justify-content: center;
  margin-top: 10px;
}

.dot {
  height: 10px;
  width: 10px;
  margin: 0 5px;
  background-color: grey;
  border-radius: 50%;
  display: inline-block;
  transition: background-color 0.3s ease;
  cursor: pointer;
}

.dot.active {
  background-color: green;
}

.controls {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin: 16px 0;
}

.controls button {
  padding: 9px 15px;
  background: #2ecc71;
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
}

.controls button:hover {
  background: green;
}




   

.product-fields {
margin-top: 20px;
}
.product-fields label {
display: block;
margin-top: 14px;
font-weight: bold;
font-size: 14px;
}
.product-fields input,
.product-fields textarea {
width: 100%;
padding: 10px;
margin-top: 6px;
border: 2px solid #ddd;
border-radius: 6px;
font-size: 15px;
}
.product-fields input:focus,
.product-fields textarea:focus {
border-color: green;
outline: none;
}

.submit-btn {
margin-top: 20px;
background: green;
color: white;
padding: 10px 20px;
border: none;
font-weight: bold;
border-radius: 6px;
cursor: pointer;
width: 100%;
transition: opacity 0.3s ease, transform 0.2s ease;
}
.submit-btn:hover {
background: darkgreen;
}
.submit-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: scale(0.98);
}

.clear-btn {
  gap: 6px;
  background-color: #f0f0f0;
  border: none;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 4px;
  
}

.clear-btn.icon svg {
  vertical-align: middle;
}



.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal {
  background: white;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
  max-width: 300px;
}

.modal-actions {
  margin-top: 16px;
  display: flex;
  justify-content: space-around;
}

.modal-actions button {
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.modal-actions button:first-child {
  background-color: #2ecc71;
  color: white;
}

.modal-actions button:last-child {
  background-color: #ccc;
}

.delete-btn {
  position: absolute;
  top: 5px;
  right: 2px;
  background: rgba(255, 255, 255, 0.2);
backdrop-filter: blur(4px);
  border: none;
  cursor: pointer;
  font-size: 18px;
  border-radius: 20%;
}

  
.nav-arrow {
  position: absolute;
  top: 50%;
transform: translateY(-50%);
background: rgba(255, 255, 255, 0.4);
transition: background 0.2s ease;
  border: none;
  padding: 6px;
  border-radius: 50%;
  cursor: pointer;

  color: green;
}
.nav-arrow:hover {
  background: rgba(255, 255, 255, 0.4);
}
.nav-arrow.left {
  left: 10px;
}
.nav-arrow.right {
  right: 10px;
}

/*.toast {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #2ecc71;
  color: white;
  padding: 12px 20px;
  border-radius: 8px;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
  opacity: 0;
  animation: fadeIn 0.3s forwards;
  z-index: 9999;
  font-size: 14px;
  font-weight: 500;
}

.toast.error {
  background: #e74c3c;
}

@keyframes fadeIn {
  to {
    opacity: 1;
  }
}
*/
.spinnerZ {
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid #ccc;
  border-top-color: #333;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin-right: 6px;
  vertical-align: middle;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}




/*Profile page*/



.premium-icon {
  cursor: pointer;
  margin-left: 38%;
  transition: transform 0.25s ease;
}

.premium-icon:hover {
  transform: scale(1.1);
}

.hamburger-icon {
  cursor: pointer;
}



.powered-logo {
  width: 45px;
  height: 45px;
border: 1px lightgrey solid;
border-radius: 50px;
}
    


.img-container {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.img {
  width: 114px;
  height: 114px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid #eee;
  margin: 0 auto;
  display: block;
}

.upload-btn {
  margin-top: 8px;
  background: #111;
  color: #fff;
  border: none;
  padding: 6px 14px;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.3s;
}

.upload-btn:hover {
  background: #333;
}




.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #ccc;
  border-top-color: #4CAF50;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}


.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(255, 255, 255, 0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}





.success-flash {
position: absolute;
top: 0; left: 0; right: 0; bottom: 0;
background: rgba(0, 255, 0, 0.3);
border-radius: 50%;
animation: flash 1s ease-out;
}

@keyframes flash {
from { opacity: 1; }
to { opacity: 0; }
}
.brand-name-section {
  margin-top: 20px;
  text-align: center;
}

.brand-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}

.brand-name {
  font-size: 20px;
  font-weight: 600;
  color: #333;
  margin: 7.5%;
}

.edit-btn {
  padding: 6px 14px;
  font-size: 14px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 20px;
  cursor: pointer;
  transition: background 0.2s;
  
}

.edit-btn:hover {
  background-color: #43a047;
}

.brand-edit {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.brand-input {
  width: 80%;
  max-width: 260px;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 16px;
  outline: none;
  margin-top : 7%;
}

.brand-input:focus {
  border-color: #4CAF50;
  box-shadow: 0 0 4px rgba(76, 175, 80, 0.4);
}

.brand-actions {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.save-btn,
.cancel-btn {
  padding: 6px 14px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  font-size: 14px;
  transition: 0.2s;
}

.save-btn {
  background-color: #4CAF50;
  color: #fff;
}

.save-btn:hover {
  background-color: #43a047;
}

.cancel-btn {
  background-color: #ccc;
  color: #333;
}

.cancel-btn:hover {
  background-color: #b3b3b3;
}









/* Buttons */
.icon-btn {
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  color: #4CAF50;
  transition: color 0.2s ease, transform 0.1s ease;
}

.icon-btn:hover {
  color: #45a049;
  transform: scale(1.1);
}

.confirm-btn {
  color: #2e7d32;
}

.edit-btn {
  color: #388e3c;
}



   
   
.button-group {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-top: 40px;
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 15px;
  background-color: #2ecc71;
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s;
}

.action-btn:hover {
  background-color: darkgreen;
}

/* Post Icon (Plus sign) */
.icon-post {
  width: 12px;
  height: 12px;
  position: relative;
}
.icon-post::before,
.icon-post::after {
  content: "";
  position: absolute;
  background: white;
}
.icon-post::before {
  width: 100%;
  height: 2px;
  top: 50%;
  left: 0;
  transform: translateY(-50%);
}
.icon-post::after {
  height: 100%;
  width: 2px;
  left: 50%;
  top: 0;
  transform: translateX(-50%);
}

/* Connect Icon (Link style) */
.icon-connect {
  width: 14px;
  height: 14px;
  border: 2px solid white;
  border-radius: 50%;
  position: relative;
}
.icon-connect::before {
  content: "";
  width: 10px;
  height: 2px;
  background: white;
  position: absolute;
  top: 6px;
  left: 50%;
  transform: translateX(-50%);
}




.modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 50;
}

.modal-box {
  background: white;
  padding: 20px;
  width: 90%;
  max-width: 300px;
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(0, 128, 0, 0.2);
  text-align: center;
  border: 1px black solid;
}

.modal-box input {
  width: 85%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 6px;
  margin-top: 10px;
  font-size: 14px;
}

.modal-actions {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 16px;
}

.icon-btn {
  border: none;
  padding: 7px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.icon-btn.save {
  background-color: #2ecc71;
}

.icon-btn.cancel {
  background-color: red;
}





.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #fff;
  padding: 12px 16px;
  border-radius: 10px;
  box-shadow: #2ecc71;
}

.tab-group {
  display: flex;
  gap: 12px;
}

.tab {
  padding: 6px 12px;
  border-radius: 20px;
  cursor: pointer;
  font-weight: 500;
  color: #333;
  transition: background-color 0.3s;
}

.tab:hover {
  background-color: #f0f0f0;
}

.tab.active {
  
  border-top: 1px solid #2ecc71;
  border-left: 0.25px solid #2ecc71;
  border-right: 0.25px solid #2ecc71;
border-bottom: 1px solid #2ecc71;
  color: #000;
}




/*.modal-overlayX {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-contentX {
  background: #fff;
  width: 90%;
  max-width: 400px;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
  animation: fadeIn 0.3s ease;
}

.modal-contentX h2 {
  margin-bottom: 10px;
  font-size: 20px;
}

.modal-contentX p {
  font-size: 16px;
  color: #444;
  margin-bottom: 20px;
}

.modal-contentX button {
  background: #28a745;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
}

.modal-contentX button:hover {
  background: #218838;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}




.search-barB {
  margin-top: 5px;
  margin-right: 5px;

  padding: 7.25px 15px;
  border-radius: 10px;
  
}

.search-barB {
  width: 100%;
  padding: 10px 14px;
  border: 0.8px green ridge;
  border-radius: 12px;
  font-size: 16px;
  outline: none;
  box-shadow: green;
}


.search-inputB {
  width: 100%;
  padding: 10px;
  font-size: 16px;
  margin-bottom: 1rem;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.delete-btn {
position: absolute;
top: 5px;
right: 2px;
background: rgba(255, 255, 255, 0.2);
backdrop-filter: blur(4px);
border: none;
cursor: pointer;
font-size: 18px;
border-radius: 20%;
}*/


.badge-premium {
  background: linear-gradient(90deg, gold, orange);
  color: #fff;
  font-size: 11px;
  font-weight: bold;
  padding: 2px 6px;
  border-radius: 6px;
  margin-left: 8px;
  text-transform: uppercase;
  box-shadow: 0 0 4px rgba(255, 200, 0, 0.5);
}

.badge-expired {
  background: #b00020;
  color: #fff;
  font-size: 11px;
  font-weight: bold;
  padding: 2px 6px;
  border-radius: 6px;
  margin-left: 8px;
  text-transform: uppercase;
  box-shadow: 0 0 4px rgba(176, 0, 32, 0.5);
}

   
   
   
   
.menu-card.logout {
  background-color: #ffe5b4; /* light orange */
  color: #ff6600;
  border: 1px solid #ff6600;
}

.menu-card.delete {
  background-color: #ffe5e5; /* light red */
  color: #ff0000;
  border: 1px solid #ff0000;
}

.delete-icon {
  stroke: #ff3300 !important;
}
.logout-icon {
  stroke: #ff9900 !important;
}

    </style>
</head>


<body>
  <div id="app">
<router-view></router-view>
  </div>

<script>

const AlphaPage =  {
  
  template: `
    <div>
      <!-- Top Header -->
      <div class="top-header">
        <div class="logo">Microcart</div>
        <div class="hamburger-icon" @click="navigateTo('/ham1')">
          <svg class="hamburger-svg" viewBox="0 0 100 80" width="32" height="32">
            <rect width="100" height="10" rx="4"></rect>
            <rect y="30" width="100" height="10" rx="4"></rect>
            <rect y="60" width="100" height="10" rx="4"></rect>
          </svg>
        </div>
      </div>

      <!-- Banner -->
      <img src="/20251008_060759.png" class="img" />

      <!-- Search Bar -->
      <div class="store-search">
        <svg class="search-svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="green" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <input
          type="search"
class="search-input"
          v-model="searchQuery"
          @input="handleSearch"
          placeholder="Search by brand name or location..."
        />
      </div>

      <!-- Storefront Results -->
      <div class="search-results">
        <div v-if="loading" class="loading-message">Searching...</div>

  <div class="search-results">
    
    <!-- Loading state: show skeleton cards -->
    <div v-if="loading" class="storefront-grid">
      <div class="storefront-card placeholder-card" v-for="n in 3" :key="n">
        <div class="brand-bar">
          <span class="arrow">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6" />
      </svg>
          </span>
          <span class="brand-name">Brand Name</span>
          <span class="arrow">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="9 18 15 12 9 6" />
      </svg>
          </span>
        </div>
        <div class="logo-circle"></div>
        <div class="store-location"></div>
        <button class="visit-btn" disabled>VISIT</button>
      </div>
    </div>
    
    <!-- Real data cards -->
    <div v-else-if="filteredResults.length" class="storefront-grid">
      <div v-for="store in filteredResults" :key="store.id" class="storefront-card">
        
        <div class="brand-bar">
          <span class="arrow">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6" />
      </svg>
          </span>
          <span class="brand-name">{{ store.name || 'Unknown Brand' }}</span>
          <span class="arrow">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="9 18 15 12 9 6" />
      </svg>
          </span>
        </div>
        
        <div class="logo-circle">
          <img :src="store.logo || '/default-logo.png'" alt="Logo" class="logo-img" />
        </div>
        
        <div class="store-location">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5S13.38 11.5 12 11.5z" />
          </svg>
          <span v-if="store.location">{{ store.location }}</span>
          <span v-else class="location-ghost">No location</span>
        </div>
        
<button @click="navigateToStore(store.slug)" class="visit-btn">VISIT</button>
      </div>
    </div>
    
    <!-- No results -->
    <div v-else class="no-results">No results found.</div>
    
  </div>
    </div>
  `,
  
  data() {
    return {
      searchQuery: '',
      filteredResults: [],
      stores: [],
      loading: false,
      debounceTimeout: null
    };
  },
  
     
  methods: {
    navigateTo(route) {
    this.$router.push(route);
  },
  
  // Replace or add this block
  navigateToStore(slug) {
  const selectedStore = this.stores.find(s => s.slug === slug);
  if (selectedStore) {
    localStorage.setItem('selectedStore', JSON.stringify(selectedStore));
  }
  this.$router.push(`/store/${slug}`);
},


    
async fetchStorefronts() {
  
      this.loading = true;
      try {
        // Replace with real API if available
 const response = await
     axios.get('/search_storefronts.php');
        this.stores = response.data || [];
      } 
      catch (error) {
        console.error("API failed, using mock data:", error);
        
        // fallback mock data
        this.stores = [
          { id: 1, name: 'TechieTown', logo: '/1000329330.png', slug: 'techietown', location: 'Lagos, Nigeria' },
          { id: 2, name: 'SuperTech', logo: '/20250731_141550.png', slug: 'supertech', location: 'Ogun, Nigeria' },
          { id: 3, name: 'The Tech Hub', logo: '/20251007_002604.png', slug: 'techhub', location: 'Osun, Nigeria' },
          { id: 4, name: 'Techify', logo: '/20251008_060759.png', slug: 'techify', location: null },
          { id: 5, name: 'TechNest', logo: '/logos/technest.png', slug: 'technest', location: 'Lagos, Nigeria' }
        ];
      } finally {
        this.filteredResults = this.stores;
        this.loading = false;
      }
    },
    
    handleSearch() {
      clearTimeout(this.debounceTimeout);
      this.debounceTimeout = setTimeout(() => {
        const q = this.searchQuery.trim().toLowerCase();
        if (q) {
          this.filteredResults = this.stores.filter(store =>
            (store.name && store.name.toLowerCase().includes(q)) ||
            (store.location && store.location.toLowerCase().includes(q))
          );
        } else {
          this.filteredResults = this.stores;
        }
      }, 300);
    }
  },
  
  mounted() {
    this.fetchStorefronts();
  }
  

  
};




const Ham1Page = {
  template: `
  <div class="ham-page">
    <!-- Header -->
    <div class="ham-header">
      <div class="back-icon" @click="goBack">
        <svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M15 18l-6-6 6-6" />
        </svg>
      </div>
      <center><span class="ham-title">Menu</span></center>
    </div>

    <!-- Menu Grid -->
    <div class="menu-grid">
      <div
        v-for="item in menuItems"
:key="item.label"
        class="menu-card"
        @click="item.label === 'Add account'? showModal = true: navigateTo(item.route)"
>
        <div class="menu-icon" v-html="item.icon"></div>
        <span>{{ item.label}}</span>
      </div>
    </div>

    <!-- Modal -->
    <div v-if="showModal" class="modal-overlay">
      <div class="modal-content">

        <div class="modal-header">Seller Access</div>
        <input type="text" v-model="sellerEmail" placeholder="Email address" />
        <button @click="handleLogin">Login</button>
        <div style="margin-top: 12px; text-align: center; font-size: 13px;">
          Don't have an account?
          <a href="#" @click.prevent="handleSignup" style="color: #00b36b;">Sign up</a>
        </div>
      </div>
    </div>
  </div>
  `,

  data() {
    return {
      showModal: false,
      sellerEmail: '',
      menuItems: [
        {
          label: "Add account",
          route: "/verify",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z" />
            <path d="M16 21v-2a4 4 0 00-8 0v2" />
            <path d="M19 8v6" />
            <path d="M22 11h-6" />
          </svg>`
},
        {
          label: "Future Upgrades",
          route: "/upgrade",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2"><path d="M12 2l4 8H8l4-8zm0 8v12"/></svg>`
},
        {
          label: "FAQs",
          route: "/faq",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>`
},

{
  label: "Donation",
  route: "/donate",
  icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#009e5f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M12 21C12 21 4 13.5 4 8a4 4 0 0 1 8 0 4 4 0 0 1 8 0c0 5.5-8 13-8 13z" />
</svg>`
},

{
  label: "About Us",
  route: "/about",
  icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 21C6.48 21 2 16.52 2 11S6.48 1 12 1s10 4.48 10 10-4.48 10-10 10z"/></svg>`
},

{
  label: "Customer Care",
  route: "/support",
  icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M22 16.92V7.08a2 2 0 0 0-1.1-1.79l-8-4.62a2 2 0 0 0-1.8 0l-8 4.62A2 2 0 0 0 2 7.08v9.84a2 2 0 0 0 1.1 1.79l8 4.62a2 2 0 0 0 1.8 0l8-4.62a2 2 0 0 0 1.1-1.79z" />
  <line x1="12" y1="2" x2="12" y2="22" />
</svg>`
}




      ]
};
},

  methods: {
    goBack() {
      this.$router.back();
},
    navigateTo(route) {
      this.$router.push(route);
},
    handleLogin() {
  const formData = new FormData();
  formData.append('email', this.sellerEmail);
  
  fetch('/login.php', {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(result => {
      if (result.success) {
        // âœ… Store userId in localStorage
        localStorage.setItem('userId', result.userId);
        
        alert('Login successful!');
        this.$router.push('/profile');
      } else {
        alert(`Login failed: ${result.message}`);
      }
    })
    .catch(error => {
      alert('An error occurred during login.');
      console.error(error);
    });
},

  handleSignup() {
  this.$router.push('/signup');
},

}
};


/*<div
        v-for="item in menuItems"
:key="item.label"
        class="menu-card"
        @click="item.label === 'Add account'? showModal = true: navigateTo(item.route)"
>*/

const Ham2Page = {
  template: `
  <div class="ham-page">
    <!-- Header -->
    <div class="ham-header">
      <div class="back-icon" @click="goBack">
        <svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M15 18l-6-6 6-6" />
        </svg>
      </div>
      <center><span class="ham-title">Menu</span></center>
    </div>


<!-- Toast Notification -->
<div
  v-if="toast.visible"
  :class="['toast', toast.type]"
>
  {{ toast.message }}
</div>
    <!-- Menu Grid -->
    <div class="menu-grid">
     
<div
  v-for="item in menuItems"
  :key="item.label"
  class="menu-card"
  :class="{'logout': item.type === 'logout', 'delete': item.type === 'delete'}"
  @click="handleMenuClick(item)"
>

     

        <div class="menu-icon" v-html="item.icon"></div>
        <span>{{ item.label}}</span>
      </div>
    </div>

    




    <!-- Modal -->
    <div v-if="showModal" class="modal-overlay">
      <div class="modal-content">

        <div class="modal-header">Seller Access</div>
        <input type="text" v-model="sellerEmail" placeholder="Email address" />
        <input type="password" v-model="sellerPassword" placeholder="Password" />
        <button @click="handleLogin">Login</button>
        <div style="margin-top: 12px; text-align: center; font-size: 13px;">
          Don't have an account?
          <a href="#" @click.prevent="handleSignup" style="color: #00b36b;">Sign up</a>
        </div>
      </div>
    </div>
  </div>
  `,

  data() {
    return {
      showModal: false,
      sellerEmail: '',
      sellerPassword: '',
    toast: 
    { visible: false, message: '', type: '' },
    toastTimeout: null,


      menuItems: [
        {
          label: "Add account",
          route: "/verify",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z" />
            <path d="M16 21v-2a4 4 0 00-8 0v2" />
            <path d="M19 8v6" />
            <path d="M22 11h-6" />
          </svg>`
},
        {
          label: "Future Upgrades",
          route: "/upgrade",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2"><path d="M12 2l4 8H8l4-8zm0 8v12"/></svg>`
},
        {
          label: "FAQs",
          route: "/faq",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>`
},

{
  label: "Donation",
  route: "/donate",
  icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#009e5f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M12 21C12 21 4 13.5 4 8a4 4 0 0 1 8 0 4 4 0 0 1 8 0c0 5.5-8 13-8 13z" />
</svg>`
},

{
  label: "About Us",
  route: "/about",
  icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 21C6.48 21 2 16.52 2 11S6.48 1 12 1s10 4.48 10 10-4.48 10-10 10z"/></svg>`
},

{
  label: "Customer Care",
  route: "/support",
  icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#00b36b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M22 16.92V7.08a2 2 0 0 0-1.1-1.79l-8-4.62a2 2 0 0 0-1.8 0l-8 4.62A2 2 0 0 0 2 7.08v9.84a2 2 0 0 0 1.1 1.79l8 4.62a2 2 0 0 0 1.8 0l8-4.62a2 2 0 0 0 1.1-1.79z" />
  <line x1="12" y1="2" x2="12" y2="22" />
</svg>`
},
{
  label: "Log Out",
  route: null,
  icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#ff9900" style="stroke:#ff9900 !important;" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
    <polyline points="16 17 21 12 16 7"/>
    <line x1="21" y1="12" x2="9" y2="12"/>
  </svg>`,
  type: "logout"
},
{
  label: "Delete Account",
  route: null,
  icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#ff3300" style="stroke:#ff3300 !important;" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M3 6h18"/>
    <path d="M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6"/>
    <line x1="10" y1="11" x2="10" y2="17"/>
    <line x1="14" y1="11" x2="14" y2="17"/>
  </svg>`,
  type: "delete"
}



      ]
};
},
   /* 


    */
    
  methods: {
    
showToast(message, type = 'success') {
  this.toast.message = message;
  this.toast.type = type;
  this.toast.visible = true;
  
   
  clearTimeout(this.toastTimeout);
  this.toastTimeout = setTimeout(() => {
    this.toast.visible = false;
  }, 3000);
},


logout() {
    localStorage.removeItem('userId');
    localStorage.removeItem('storeId');
this.showToast('You have been logged out.', 'error');
    
    this.$router.replace('/login'); // prevents back nav
  },
  
  async deleteAccount() {
    const userId = localStorage.getItem('userId');
    if (!userId) return
this.showToast('No user logged in.', 'error');
       
    if (!confirm("Are you sure? This cannot be undone.")) return;
    
    const formData = new FormData();
    formData.append('user_id', userId);
    
    try {
      const res = await fetch('/delete_account.php', {
        method: 'POST',
        body: formData
      });
      const data = await res.json();
      if (data.success) {
        localStorage.removeItem('userId');
        localStorage.removeItem('storeId');
this.showToast('Account deleted.', 'error');
       
        this.$router.replace('/signup'); // prevent back nav
      } else {

        this.showToast(data.message || "Failed to delete account.", 'error');
        }
    } catch (err) {
this.showToast('An error occurred. Try again.', 'error');
       
      
      console.error(err);
    }
  },
  
  handleMenuClick(item) {
    if (item.label === "Add account") {
      this.showModal = true;
    } else if (item.label === "Log Out") {
      this.logout();
    } else if (item.label === "Delete Account") {
      this.deleteAccount();
    } else if (item.route) {
      this.navigateTo(item.route);
    }
  },
  

    goBack() {
      this.$router.back();
},
    navigateTo(route) {
      this.$router.push(route);
},



    handleLogin() {
  const formData = new FormData();
  formData.append('email', this.sellerEmail);
  formData.append('password', this.sellerPassword);
  
  fetch('/login.php', {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(result => {
      if (result.success) {
        // âœ… Store userId in localStorage
        localStorage.setItem('userId', result.userId);
this.showToast('Login successful!', 'error');
        
        this.$router.push('/dashboard');
      } else {
this.showToast(`Login failed: ${result.message}`, 'error');
      }
    })
    .catch(error => {
      this.showToast('An error occurred during login.', 'error');
      console.error(error);
    });
},

  handleSignup() {
  this.$router.push('/signup');
},

}
};



const SignupPage = {
template: `
  <div class="signup-page">
    
    <!-- Loading Overlay -->
    <div v-if="loading" class="loading-overlay">
      <div class="spinner"></div>
    </div>

    <!-- Toast Notification -->
    <div v-if="toast.visible" class="toast" :class="toast.type">
      {{ toast.message }}
    </div>

    <h2 class="signup-title">Create Seller Account</h2>

    <form @submit.prevent="submitSignup">
      
      <!-- Logo Upload -->
      <div class="logo-upload">
        <div class="logo-preview-wrapper">
          <img :src="logoPreview || defaultLogo" alt="Logo Preview" class="logo-preview" />
        </div>
        <input ref="logoInput" type="file" accept="image/*" hidden @change="handleLogoUpload" />
        <button type="button" class="upload-btn" @click="triggerLogoUpload" :disabled="isUploading">
          {{ isUploading ? "Uploading..." : "Upload Logo" }}
        </button>
      </div>

      <!-- Brand Info -->
      <input type="text" v-model.trim="sellerBrandname" placeholder="Brand Name" required />
      <input type="email" v-model.trim="sellerEmail" placeholder="Email Address" required />
      

      <input type="text" v-model.trim="sellerLocation" placeholder="Location (e.g. Lagos, Nigeria)" required />
      <input type="tel" v-model.trim="sellerCallNumber" placeholder="Call Number" required />
      <input type="tel" v-model.trim="sellerWhatsapp" placeholder="WhatsApp Number" required />

      <button type="submit" :disabled="loading">Sign Up</button>
    </form>

    <p class="login-link">
      Already have an account?
      <a href="#" @click.prevent="$router.push('/login')">Log in</a>
    </p>
  </div>
  `,
  
  data() {
    return {
      sellerLogo: null,
      logoPreview: '',
      defaultLogo: "https://cdn-icons-png.flaticon.com/512/847/847969.png",
      sellerBrandname: '',
      sellerEmail: '',      sellerLocation: '',
      sellerCallNumber: '',
      sellerWhatsapp: '',
      loading: false,
      isUploading: false,
      toast: {
        visible: false,
        message: '',
        type: 'success'
      },
      toastTimeout: null
    };
  },
mounted() {
  const urlParams = new URLSearchParams(window.location.search);
  const verified = urlParams.get("verified");
  if (verified === "success") {
    this.showToast("Email verified successfully!", "success");
  } else if (verified === "already") {
    this.showToast("Your account is already verified.", "info");
  }
},

  methods: {
    triggerLogoUpload() {
      this.$refs.logoInput.click();
    },
    
    handleLogoUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      if (!file.type.startsWith("image/")) {
        this.showToast("Please select a valid image file.", "error");
        return;
      }
      this.sellerLogo = file;
      const reader = new FileReader();
      reader.onload = (e) => (this.logoPreview = e.target.result);
      reader.readAsDataURL(file);
    },
    
    showToast(message, type = "success", duration = 3000) {
      this.toast.message = message;
      this.toast.type = type;
      this.toast.visible = true;
      clearTimeout(this.toastTimeout);
      this.toastTimeout = setTimeout(() => (this.toast.visible = false), duration);
    },
    
    normalizeNumber(number) {
      number = number.trim();
      if (/^0\d{10}$/.test(number)) return "+234" + number.slice(1);
      if (/^234\d{10}$/.test(number)) return "+" + number;
      return number;
    },
    
  async submitSignup() {
      if (!this.sellerBrandname || !this.sellerEmail ) {
        this.showToast("All fields are required.", "error");
        return;
      }
      if (!/\S+@\S+\.\S+/.test(this.sellerEmail)) {
        this.showToast("Please enter a valid email address.", "error");
        return;
      }

// Logo is optional â€” no validation required

      this.loading = true;
      
      const call = this.normalizeNumber(this.sellerCallNumber);
      const wa = this.normalizeNumber(this.sellerWhatsapp);
      
      const formData = new FormData();
formData.append("brandname", this.sellerBrandname);
formData.append("email", this.sellerEmail);
formData.append("location", this.sellerLocation);
formData.append("call_number", call);
formData.append("whatsapp_number", wa);

// Append logo ONLY if the user selected one
if (this.sellerLogo) {
  formData.append("logo", this.sellerLogo);
}
      
      try {
const res = await fetch("/signup.php", {
        
          method: "POST",
          body: formData
        });
        
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        
        const data = await res.json();
        
if (data.success) {
  localStorage.setItem("userId", data.userId);
  localStorage.setItem("storeId", data.storeId);
  
  // --- SAFELY UPDATE STORES ---
  if (this.stores) {
    this.stores.unshift({
      id: data.storeId,
      name: this.sellerBrandname,
      logo: this.logoPreview || this.defaultLogo,
      location: this.sellerLocation,
      slug: this.sellerBrandname.toLowerCase().replace(/\s+/g, "-")
    });
    
    if (this.filteredResults) {
      this.filteredResults = this.stores;
    }
  }
  
  this.showToast("Signup successful!", "success");
  setTimeout(() => this.$router.push("/profile"), 1500);
} else {
  this.showToast(data.message || "Signup failed. Try again.", "error");
}

      } catch (err) {
        console.error("Signup error:", err);
        this.showToast("Network error. Please try again.", "error");
      } finally {
        this.loading = false;
      }
    }
  }
  
};


     
   
const LoginPage = {
  template: `
  <div class="signup-page">
    <h2 class="modal-header">Seller Access</h2>

    <!-- Toast -->
    <div v-if="toast.visible" class="toast" :class="toast.type">
      {{ toast.message }}
    </div>

    <form @submit.prevent="handleLogin">
      <input type="email" v-model="sellerEmail" placeholder="Email address" required />

      <button type="submit" :disabled="loading">
        {{ loading ? "Logging in..." : "Login" }}
      </button>
    </form>

    <div style="margin-top: 12px; text-align: center; font-size: 13px;">
      Don't have an account?
      <a href="#" @click.prevent="handleSignup" style="color: #00b36b;">Sign up</a>
    </div>
  </div>
  `,
  
  data() {
    return {
      sellerEmail: '',
      loading: false,
      toast: {
        visible: false,
        message: '',
        type: 'success'
      },
      toastTimeout: null
    };
  },
  
  methods: {
    showToast(message, type = "success", duration = 2500) {
      this.toast.message = message;
      this.toast.type = type;
      this.toast.visible = true;
      clearTimeout(this.toastTimeout);
      this.toastTimeout = setTimeout(() => (this.toast.visible = false), duration);
    },
    
    async handleLogin() {
      if (!/\S+@\S+\.\S+/.test(this.sellerEmail)) {
        this.showToast("Please enter a valid email.", "error");
        return;
      }
      
    
      this.loading = true;
      
      const formData = new FormData();
      formData.append('email', this.sellerEmail);

      try {
const res = await fetch("/login.php", {
  method: 'POST',
  body: formData
});

if (!res.ok) throw new Error(`HTTP ${res.status}`);
const result = await res.json();

if (result.success) {
  localStorage.setItem('userId', result.userId);
  this.showToast('Login successful!', 'success');
  setTimeout(() => this.$router.push('/profile'), 1200);
} else {
  this.showToast(result.message || 'Invalid credentials.', 'error');
}
} catch (error) {
        console.error('Login error:', error);
        this.showToast('Network error. Please try again.', 'error');
      } finally {
        this.loading = false;
      }
    },
    
    handleSignup() {
      this.$router.push('/signup');
    }
  }
};




    

const UpgradePage = {
    template: `
  <div class="future-upgrades-page">
    <h1>Future Upgrades</h1>
    <p>Hereâ€™s a glimpse into whatâ€™s coming soon to enhance your experience.</p>

    <div class="upgrade-grid">
      <div v-for="feature in futureFeatures":key="feature.title" class="upgrade-card">
        <div class="upgrade-icon" v-html="feature.icon"></div>
        <h3>{{ feature.title}}</h3>
        <p>{{ feature.description}}</p>
      </div>
    </div>
  </div>
  `,

  data() {
    return {
      futureFeatures: [
        {
          title: "Anime Ads Generator",
          description: "Create and deploy anime-themed promotional content tailored to your audience.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><path d="M4 4h16v16H4z"/><path d="M8 8h8v8H8z"/></svg>`
},
        {
          title: "Chatting System (Anime)",
          description: "Engage with others through a stylized anime chat interface with expressive avatars.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>`
},
        {
          title: "Job Review System",
          description: "Explore job opportunities and leave feedback on roles within the ecosystem.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>`
},
        {
          title: "Direct App Clone WebApp",
          description: "Access a web-based clone of the mobile app for seamless cross-platform use.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>`
},
        {
          title: "Payment Gateway (InApp)",
          description: "Enable secure and fast transactions directly within the app.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><path d="M4 6h16v12H4z"/><path d="M4 10h16"/></svg>`
},
        {
          title: "Real-Time Comments, Likes, Notifications",
          description: "Interact instantly with content and receive live updates across the platform.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><path d="M12 20l-8-8h16z"/></svg>`
},
        {
          title: "AI Automation",
          description: "Automate tasks and recommendations using intelligent algorithms.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>`
},
        {
          title: "Integrated Message Outlook",
          description: "View and manage all communications in a unified inbox.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><path d="M4 4h16v16H4z"/><path d="M4 4l8 8 8-8"/></svg>`
},
        {
          title: "Personalized Product Engine",
          description: "Generate tailored product lines based on user preferences and behavior.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>`
},
        {
          title: "Realtime Seller Upload of 3D Products",
          description: "Let sellers upload and showcase 3D product models instantly.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><path d="M12 2l9 5v10l-9 5-9-5V7z"/><path d="M12 22V12"/></svg>`
},
        {
          title: "Inbuilt Gamification System",
 description: "Boost engagement with points, levels, and rewards built into the app.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>`
},
        {
          title: "Settings (Assurance)",
          description: "Advanced settings to ensure user control, privacy, and customization.",
          icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 2"/></svg>`
}
      ]
};
  }
    
};




const FAQsPage = {
    template: `
    <div class="faqs-page">
      <!-- Top Header -->
      <div class="top-header">
        <div class="back-icon" @click="goBack"><i class="fas fa-arrow-left"></i></div>
<div class="header-text">FAQs - Frequently Asked Questions</div>
      </div>

      <div class="faq-section">
        <h3>General</h3>
        <div 
          v-for="(item, index) in faqs.general" 
          :key="'g' + index" 
          class="faq-item"
        >
          <div class="question" @click="toggle('g' + index)">
            {{ item.question }}
            <i :class="expanded === 'g' + index ? 'fas fa-chevron-up' : 'fas fa-chevron-down'"></i>
          </div>
          <transition name="slide">
            <div v-if="expanded === 'g' + index" class="answer">
              {{ item.answer }}
            </div>
          </transition>
        </div>

        <h3>Buyers</h3>
        <div 
          v-for="(item, index) in faqs.buyers" 
          :key="'b' + index" 
          class="faq-item"
        >
          <div class="question" @click="toggle('b' + index)">
            {{ item.question }}
            <i :class="expanded === 'b' + index ? 'fas fa-chevron-up' : 'fas fa-chevron-down'"></i>
          </div>
          <transition name="slide">
            <div v-if="expanded === 'b' + index" class="answer">
              {{ item.answer }}
            </div>
          </transition>
        </div>

        <h3>Sellers</h3>
        <div
 v-for="(item, index) in faqs.sellers" 
          :key="'s' + index" 
          class="faq-item"
        >
          <div class="question" @click="toggle('s' + index)">
            {{ item.question }}
            <i :class="expanded === 's' + index ? 'fas fa-chevron-up' : 'fas fa-chevron-down'"></i>
          </div>
          <transition name="slide">
            <div v-if="expanded === 's' + index" class="answer">
              {{ item.answer }}
            </div>
          </transition>
        </div>
      </div>
    </div>
    `,
  data() {
    return {
      expanded: null,
      faqs: {
        general: [
        {
          question: "What is MicroShop?",
          answer: "MicroShop is a social commerce platform that blends social interactions with eCommerce features."
          
        },
        {
          question: "What makes MicroShop different from similar platforms?",
          answer: "MicroShop blends eCommerce with social interactions, allowing buyers and sellers to connect more naturally, similar to how people engage on social platforms. It focuses on nearby product discovery, verified sellers, and trust-driven commerce."
        },
        {
          question: "Can I access MicroShop on mobile App?",
          answer: "Not yet. The mobile app is currently under development. For now, you can access MicroShop through your mobile browser with a responsive design. We're working on releasing a dedicated app soon for both Android and iOS."
        }],
        
        buyers: [
          {
            question: "How do I find nearby products?",
            answer: "Use the 'Nearby' tab to discover products around your location."
            
            
          },
          
          {
            question: "How do I report a seller due to any notable reasons?",
            answer: "To report a seller, simply click the three-dots (ï¸™) icon on their product or profile. From the dropdown, select the 'Report Seller' option and follow the instructions provided."
          },
          {
            question: "How do I contact a seller before buying any of their products?",
            
            question: "How do I contact a seller before buying any of their products?",
            answer: "There are two easy ways to contact a seller:\n\n1. Click the 'View' button on the product.\n2. On the product page, tap the 'Message' button to chat directly, or click the 'Contact' icon to call the seller.\n\nNote: You can long press or double tap the contact icon to copy the sellerâ€™s phone number."
          } 
        ],
        sellers: [
        {
          question: "How do I create a seller account?",
          answer: "Go to Verification and click on -> 'Join as a seller' tab -> fill up the form then submit through the 'verify' button."
          
        },
        {
          question: "What are the requirements for verification?",
          answer: "When applying for verification, ensure you provide accurate business details, a valid means of identification, and proof of product authenticity. Be considerate and transparent when filling the form, as incomplete or misleading information may delay approval."
        },
        {
          question: "Can I run ads through MicroShop to promote my products?",
          answer: "Yes, you can promote your products through the Ads Manager page. Once there, you'll be guided through the requirements such as setting a budget, choosing target demographics, and uploading your ad content."
        }]
      }
    };
  },
  methods: {
    toggle(index) {
      this.expanded = this.expanded === index ? null : index;
    },
    goBack() {
      this.$router.back();
    }
  },
};

   
const DonationPage = {
    template: `
<div class="main-content support-page">
  <h1 class="support-header">Support & Assistance</h1>
  <p class="support-intro">
    Building MicroShop has been a journey â€” built from a mobile phone with love and code. If you'd like to support us, we appreciate you!
  </p>
  
  <div class="donate-section">
    <button class="donate-toggle-btn" @click="toggleDonate">
      <i class="fas fa-heart"></i> Support the Project
    </button>
    
    <div v-if="showDonateOptions" class="donate-options">
      <p>You can support via:</p>
      <div class="donate-btn-group">
        <button class="donate-btn" @click="donate('paypal')">
          <i class="fab fa-paypal"></i> PayPal
        </button>
        <button class="donate-btn" @click="donate('crypto')">
          <i class="fab fa-bitcoin"></i> Crypto
        </button>
        <button class="donate-btn" @click="donate('bank')">
          <i class="fas fa-university"></i> Bank Transfer
        </button>
      </div>
      <p class="donate-note">Every donation keeps MicroShop growing stronger. ðŸ’œ</p>
    </div>
  </div>
  
  <div class="other-support">
    <h3>Need Help?</h3>
    <ul>
      <li><i class="fas fa-headset"></i> Contact Support</li>
      <li><i class="fas fa-bug"></i> Report a Bug or Suggestion</li>
      <li><i class="fas fa-envelope"></i> Email Us</li>
    </ul>
  </div>
</div>
`,
  data() {
    return {
      showDonateOptions: false,

    };
  },
  methods: {
    toggleDonate() {
      this.showDonateOptions = !this.showDonateOptions;
    },
    donate(method) {
      switch (method) {
        case 'paypal':
          window.open('https://paypal.me/YOUR_LINK_HERE', '_blank'); // TODO: Replace with your PayPal.me link
          break;
        case 'crypto':
          alert('Send BTC to: 1BoatSLRHtKNngkdXEeobR76b53LETtpyT'); // TODO: Replace with a QR modal if needed
          break;
        case 'bank':
          alert('Account Name: MicroShop Dev\nAcct No: 1234567890\nBank: Example Bank'); // TODO: Secure this if necessary
          break;
      }
    }
  }
};



const AboutUsPage = {
    template: `
    
    `,
 };
 
 
 
const CustomerCarePage = {
    template: `
    
    `,
    
};






/*Dashboard Page
const DashboardPage = {
  template: `
    Null for now
    `,
};
*/




/*PostPage*/
const PostPage = {

template: `

<section class="media-uploader">  
  <!-- Media Preview -->  
  <div class="media-preview" @touchstart="startSwipe" @touchend="endSwipe">  
    <div class="preview-wrapper">  
<img  
  v-if="imagePreviews.length"  
  :src="imagePreviews[activeIndex]"  
  class="media-img"  
/>  
      <div v-else class="placeholder">Selected item appears here</div>  <!-- Navigation Arrows -->  
  <button v-if="activeIndex > 0" class="nav-arrow left" @click="activeIndex--" aria-label="Previous image">  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"  
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">  
      <polyline points="15 18 9 12 15 6" />  
    </svg>  
  </button>  

  <button v-if="activeIndex < images.length - 1" class="nav-arrow right" @click="activeIndex++" aria-label="Next image">  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"  
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">  
      <polyline points="9 18 15 12 9 6" />  
    </svg>  
  </button>  

  <!-- Delete Icon -->  
  <button v-if="images.length" class="delete-btn" @click="deleteActiveImage" aria-label="Delete image">  
    <i class="fas fa-trash-alt"></i>  
  </button>  
</div>

  </div>    <!-- Carousel Dots -->    <div class="carousel-dots" v-if="images.length > 1">  
    <span  
      v-for="(img, index) in images"  
      :key="index"  
      :class="['dot', { active: index === activeIndex }]"  
      @click="activeIndex = index"  
    ></span>  
  </div>    <!-- Controls -->    <div class="controls">  
    <button @click="triggerImageSelect">Select</button>  
    <input type="file" ref="singleImageInput" @change="handleSingleImage" accept="image/*" hidden />  <button
@click="triggerAddMore"
:disabled="images.length >= 2"
>
More
</button>


<input type="file" ref="multiImageInput" @change="handleMultipleImages" accept="image/*" hidden multiple />  

<button @click="showClearModal = true" class="clear-btn">
  <i class="fas fa-trash-alt"></i> Clear
</button>

  </div>    <!-- Delete All Modal -->    <div v-if="showClearModal" class="modal-overlay">  
    <div class="modal">  
      <p>Are you sure you want to delete all uploads?</p>  
      <div class="modal-actions">  
        <button @click="confirmClearAll">Yes, delete</button>  
        <button @click="showClearModal = false">Cancel</button>  
      </div>  
    </div>  
  </div>    <!-- Product Form -->    <div class="product-fields">  
    <label>Title</label>  
    <input type="text" v-model="title" placeholder="Product name" required />  <label>Price</label>  
<input type="tel" v-model="price" placeholder="â‚¦Price" @input="updatePrice($event.target.value)" required />  

<label>Description</label>  
<textarea v-model="description" placeholder="Additional caption is required" rows="4" required></textarea>

<button
@click.prevent="submitPost"
:disabled="isSubmitting"
class="submit-btn"

> 

<span v-if="!isSubmitting" >Post Product</span>
<span v-else>
<i class="spinnerZ"></i> Posting...
</span>
</button>

  </div>    <!-- Post Limit Modal -->    <div v-if="showLimitModal" class="modal-overlay">  
    <div class="modal">  
      <h3>Posting Limit Reached</h3>  
<p>Youâ€™ve reached your free post limit (25/25). You canâ€™t post more for now.</p>
<div class="modal-actions">
  <button @click="showLimitModal = false">Close</button>
</div>
      </div>  
    </div>  
  </div>    
  <div v-if="showLoginAlert" class="modal-overlay">  
  <div class="modal">  
    <h3>Login Required</h3>  
    <p>You need to log in to post a product.</p>  
    <div class="modal-actions">  
      <button @click="$router.push('/login')">Go to Login</button>  
      <button @click="showLoginAlert = false">Cancel</button>  
    </div>  
  </div>  
</div> 

<!-- Toast Notification -->
<div v-if="toast.visible" :class="['toast', toast.type]">
  {{ toast.message }}
</div>
</section>  
`,  
data() {
  return {
    userId: null,
    postCount: 0,
    touchStartX: 0,
    title: '',
    price: '',
    description: '',
    images: [],
    imagePreviews: [],
    activeIndex: 0,
    toast: { visible: false, message: '', type: '' },
    toastTimeout: null,
    showClearModal: false,
    showLimitModal: false,
    isSubmitting: false,
    showLoginAlert: false,
  };
},



mounted() {
const savedUser = JSON.parse(localStorage.getItem('user'));

if (savedUser && savedUser.id) {
this.userId = savedUser.id;
this.fetchPostCount(); // âœ… replace fetchUserPlan with this
}
},


computed: {
formattedPrice() {
if (!this.price) return '';
return this.price.replace(/\D/g, '').replace(/\B(?=(\d{3})+(?!\d))/g, ',');
},
},

methods: {

showToast(message, type = 'success') {
  this.toast.message = message;
  this.toast.type = type;
  this.toast.visible = true;
  
  clearTimeout(this.toastTimeout);
  this.toastTimeout = setTimeout(() => {
    this.toast.visible = false;
  }, 3000);
},

async safeFetch(url, options = {}) {
try {
const response = await fetch(url, options);
if (!response.ok) {
throw new Error(`Server responded with status ${response.status}`);
}

const data = await response.json();  
if (!data.success) {  
  throw new Error(data.message || "Operation failed.");  
}  
  
return data; // âœ… success path

} catch (err) {
console.error("Fetch error:", err);
this.showToast(`âš ï¸ ${err.message || "Network or server error. Please try again."}`, 'error');
return null; // âŒ so caller can check if request failed
}
},




async fetchPostCount() {
const data = await this.safeFetch('/get_user_post_count.php?user_id=' + this.userId);
  if (!data) return;
  this.postCount = data.postCount || 0;
},

triggerImageSelect() {
this.$refs.singleImageInput.click();
},

handleSingleImage(event) {
const file = event.target.files[0];
if (!file) return;

if (this.validateImage(file)) {
const reader = new FileReader();
reader.onload = (e) => {
this.images = [file];
this.imagePreviews = [e.target.result]; // âœ… add this
this.activeIndex = 0;
};
reader.readAsDataURL(file);
} else {
event.target.value = ''; // reset input
}
},

triggerAddMore() {
this.$refs.multiImageInput.click();
},

handleMultipleImages(event) {
  const files = Array.from(event.target.files);
  if (!files.length) return;
  
  const validFiles = files.filter((file) => this.validateImage(file));
  
  // âœ… Limit to 2 images total
  if ((this.images.length + validFiles.length) > 2) {
    this.showToast('You can upload up to 2 images per product.', 'error');
    return;
  }
  
  // âœ… Add files and previews
  validFiles.forEach(file => {
    this.images.push(file);
    const reader = new FileReader();
    reader.onload = (e) => { this.imagePreviews.push(e.target.result); };
    reader.readAsDataURL(file);
  });
  
  this.activeIndex = this.imagePreviews.length - 1;
  event.target.value = '';
},



deleteActiveImage() {
this.images.splice(this.activeIndex, 1);
this.imagePreviews.splice(this.activeIndex, 1);
if (this.activeIndex >= this.imagePreviews.length) {
this.activeIndex = this.imagePreviews.length - 1;
}
if (this.imagePreviews.length === 0) {
this.activeIndex = 0;
}
},


confirmClearAll() {
this.images = [];
this.imagePreviews = [];
this.activeIndex = 0;
this.showClearModal = false;
},
updatePrice(value) {
const clean = value.replace(/\D/g, '');
this.price = clean.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
},


validateImage(file) {
const validTypes = ['image/jpeg', 'image/png', 'image/webp'];
const maxSize = 3 * 1024 * 1024; // 3 MB

if (!validTypes.includes(file.type)) {
this.showToast(`âŒ ${file.name} is not a supported format (use JPG, PNG, or WEBP).`, 'error');

return false;
}
if (file.size > maxSize) {
this.showToast(`âš ï¸ ${file.name} is too large. Max size: 3MB.`, 'error');
return false;
}
return true;
},

async submitPost() {

if (!this.userId) {
this.showToast('You must log in before posting.', 'error');
return;
}
if (this.isSubmitting) return;
this.isSubmitting = true;

try {
// 1ï¸âƒ£ Check posting limit
if (this.postCount >= 25) {
  this.showToast('Youâ€™ve reached your free post limit (25).', 'error');
  this.isSubmitting = false;
  return;
}

// 2ï¸âƒ£ Check image limit  
const maxImages = 2;
if (this.images.length > maxImages) {
  this.showToast(`Free users can only upload up to ${maxImages} images per product.`, 'error');
  
  this.isSubmitting = false;  
  return;  
}  
  
// 3ï¸âƒ£ Build form data  
const formData = new FormData();  
formData.append('user_id', this.userId);  
formData.append('title', this.title);  
formData.append('price', this.price);  
formData.append('description', this.description);  
  
this.images.forEach((img, i) => formData.append(`image_${i}`, img));  
  
// 4ï¸âƒ£ Send to backend  
const data = await this.safeFetch('/add_product.php', {
  method: 'POST',
  body: formData
});


if (!data) return; // stop if failed

if (data.success) {
  this.showToast('âœ… Product posted successfully!', 'success');
  this.title = '';
  this.price = '';
  this.description = '';
  this.images = [];
  this.imagePreviews = [];
  this.activeIndex = 0;
  
  // âœ… Refresh from backend instead of manually incrementing
  await this.fetchPostCount();
}

else {  
  this.showToast('âŒ Error posting product: ' + data.message, 'error');
}

} catch (err) {
console.error('Post failed:', err);
} finally {
this.isSubmitting = false;
}
},



startSwipe(e) {  
  this.touchStartX = e.changedTouches[0].clientX;  
},  
endSwipe(e) {  
  const deltaX = e.changedTouches[0].clientX - this.touchStartX;  
  if (Math.abs(deltaX) > 50) {  
    if (deltaX > 0 && this.activeIndex > 0) this.activeIndex--;  
    else if (deltaX < 0 && this.activeIndex < this.images.length - 1) this.activeIndex++;  
  }  
},


}
};




/*Profile Page*/
const API = {
  BASE: '/',
  
  UPLOAD_PROFILE: '/upload_profile.php',
  
  SAVE_CALL: '/save_call_number.php',

  SAVE_WHATSAPP: '/save_whatsapp_number.php',
  
  SAVE_BRAND: '/save_brandname.php',
  
  GET_USER: '/get_user.php',
  
  GET_PRODUCTS: '/get_products.php',
  
  DELETE_PRODUCT: '/delete_product.php'
  
};


  

const ProfilePage =  {
  
    template: `
<div class="profile-page">
  
<div v-if="loading" class="loading-overlay">
  <div class="spinner"></div>
</div>

<!-- Toast always available -->
<div v-if="toast.visible" class="toast" :class="toast.type">
  {{ toast.message }}
</div>

  
<div class="top-header">
  <div class="logo">Microcart</div>
  

  
  <!-- ðŸ” Hamburger Icon -->
  <div class="hamburger-icon" @click="navigateTo('/ham2')">
    <svg class="hamburger-svg" viewBox="0 0 100 80" width="32" height="32">
      <rect width="100" height="10" rx="4"></rect>
      <rect y="30" width="100" height="10" rx="4"></rect>
      <rect y="60" width="100" height="10" rx="4"></rect>
    </svg>
  </div>
</div>


  
  <div class="profile-section">
    <!-- Profile Picture -->
    <div class="profile-pic-wrapper">
      <div class="img-container">
<img :src="profilePreview || defaultAvatar" class="img" alt="Profile Picture" />

        
        <!-- Hidden File Input -->
        <input type="file" id="fileInput" @change="handleProfileUpload" hidden />
        
        <!-- Upload Button -->
        <button class="upload-btn" @click="triggerFileInput" :disabled="isUploading">
          {{ isUploading ? "Uploading..." : "Upload" }}
        </button>
        
        <!-- Upload Overlay Spinner -->
        <div v-if="isUploading" class="upload-overlay">
          <div class="spinner"></div>
        </div>
      </div>
    </div>
  </div>



<!-- Brand Display Mode -->
<div v-if="!editingBrand" class="brand-display">
  <h2 class="brand-name">{{ brandName || "Your Brand Name" }}</h2>
  <button class="edit-btn" @click="editingBrand = true">Edit</button>
</div>

<!-- Brand Edit Mode -->
<div v-else class="brand-edit">
  <input
    type="text"
    v-model="brandName"
    class="brand-input"
    placeholder="Enter your brand name..."
  />
  <div class="brand-actions">
    <button class="save-btn" @click="saveBrandName">Save</button>
    <button class="cancel-btn" @click="editingBrand = false">Cancel</button>
  </div>
</div>

<p class="post-usage">Posts used: {{ postCount }}/25</p>


    <div class="button-group">
      <button class="action-btn" @click="goToPost">
        <span class="icon-post"></span> Post
      </button>

      <button class="action-btn" @click="openWaModal">
        <span class="icon-connect"></span> Connect
      </button>

      <button class="action-btn icon-only" @click="openCallModal">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" fill="none">
          <rect width="48" height="48" rx="8" fill="#4CAF50" />
          <path d="M34.6 29.2c-2.6-1.3-5.3-2.9-6.6-4.2s-2.9-4-4.2-6.6c-.3-.6-.2-1.3.3-1.8l2.9-2.9c.5-.5.5-1.3 0-1.8l-5.1-5.1c-.5-.5-1.3-.5-1.8 0l-3.6 3.6c-.6.6-.9 1.4-.9 2.2 0 4.2 2.4 9.3 6.6 13.5s9.3 6.6 13.5 6.6c.8 0 1.6-.3 2.2-.9l3.6-3.6c.5-.5.5-1.3 0-1.8l-5.1-5.1c-.5-.5-1.3-.5-1.8 0l-2.9 2.9c-.5.5-1.2.6-1.8.3z" fill="white" />
        </svg>
      </button>
    </div>

    <!-- Call Modal -->
    <div class="modal-backdrop" v-if="callModal">
      <div class="modal-box">
        <h3>Call Only</h3>
        <input type="tel" v-model="callNumber" placeholder="Phone number for calls..." />
        <div class="modal-actions">
          <button class="icon-btn save" @click="saveCallNumber">save</button>
          <button class="icon-btn cancel" @click="closeCallModal">back</button>
        </div>
      </div>
    </div>

    <!-- WhatsApp Modal -->
    <div class="modal-backdrop" v-if="waModal">
      <div class="modal-box">
        <h3>Edit WhatsApp Number</h3>
        <input type="tel" v-model="whatsappNumber" placeholder="WhatsApp number..." />
        <div class="modal-actions">
          <button class="icon-btn save" @click="saveWhatsappNumber">save</button>
          <button class="icon-btn cancel" @click="closeWaModal">back</button>
        </div>
      </div>
    </div>

    <div class="top-bar">
      <div class="tab-group">
        <span class="tab" :class="{ active: activeTab === 'products'}" @click="setTab('products')">Products</span>
        

</div>

      <div class="search-icon" @click="toggleSearch">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z"/>
        </svg>
      </div>
      


    </div>
     
    <!-- Search Input -->
<div v-if="showSearch" class="search-bar">
    <!-- Search Input -->
  <input 
ref="searchInput"
  type="search"
  v-model="searchQuery"
  @input="searchProducts"
  placeholder="Search for products..."
  class="search-input"
/>
</div>
    

      
    <!-- Search Results -->
<div class="product-grid" v-if="searchResults.length">
  <div class="product-card" v-for="product in searchResults" :key="product.id">
    <img :src="product.images[0]" alt="Product Image" class="product-img" />
    <h4 class="product-title">{{ product.title }}</h4>
    <p class="product-price">â‚¦{{ product.price }}</p>
    
<div class="product-actions">
<button class="view-btn" @click="viewProduct(product)">View</button>

</span>


  
</div>

</div>
</div>


      
<!-- Product Modal -->
<div v-if="showModal" class="modal-overlayX" @click.self="closeModal">
  <div class="modal-contentX">

    <!-- Image Carousel (single image fallback) -->
    <div class="modal-image-wrapper">
      <img
        v-if="selectedProduct.images && selectedProduct.images.length"
        :src="selectedProduct.images[activeImageIndex]"
        alt="Product Image"
        class="modal-image"
      />

      <!-- Carousel Controls -->
      <div v-if="selectedProduct.images && selectedProduct.images.length > 1" class="carousel-controls">
        <button @click="prevImage">&lt;</button>
        <button @click="nextImage">&gt;</button>
      </div>
    </div>

    <!-- Info -->
    <div class="info-section">
      <p><strong>Price:</strong> â‚¦{{ selectedProduct.price }}</p>
      <p><strong>Description:</strong> {{ selectedProduct.description }}</p>
    </div>

    <!-- Action Buttons -->
<!-- Action Buttons -->
<div class="action-buttons">


  <!-- DELETE BUTTON -->
  <button class="delete-btn" 
          @click="deleteProduct(selectedProduct)">
    Delete
  </button>

  <button class="btn-closeX" @click="closeModal">Close</button>
</div>

  </div>
</div>



    <!-- No Results Message -->
<div v-if="loading" class="loading-message">Loading...</div>
<div v-else-if="searchResults.length" class="product-grid">
  
</div>
<p v-else-if="searchQuery.trim()" class="no-results">
  <i class="fas fa-search"></i> No matching products found.
</p>
<p v-else class="no-products">No products available for this store yet.</p>





  </div>
`,
  data() {
    return {
      
toast: {
  visible: false,
  message: '',
  type: 'success', // success | error | info
},

showModal: false,
  selectedProduct: null,
  isUploading: false,
  profilePreview: '',
  defaultAvatar: "https://cdn-icons-png.flaticon.com/512/847/847969.png", // fallback avatar
  brandName: '',
     editingBrand: false,
      waModal: false,
      whatsappNumber: '',
      callModal: false,
      callNumber: '',
      userId: localStorage.getItem('userId') || '',
storeId: localStorage.getItem('storeId') || '',

cart: JSON.parse(localStorage.getItem('cart')) || [],
      activeTab: 'products',
      showSearch: false,
      searchResults: [],
      searchQuery: '',
      loading: true,
      showSuccess: false,
     debounceTimeout: null,
products: [],
activeImageIndex: 0, // for image carousel
postCount: 0,
};

},
    
    
mounted() {
  this.loadUserData();
  this.loadProducts(); // fetch real products

  

  // Temporary mock data (for UI testing)
  if (!this.products || this.products.length === 0) {
    this.products = [
      {
        id: 1,
        title: "Red Sneakers",
        price: 12000,
        description: "Comfortable running shoes",
        images: ["/1000263361.png","/1000284060.png"]
      },
      {
        id: 2,
        title: "Blue Hoodie",
        price: 9000,
        description: "Warm cotton hoodie",
        images: ["https://via.placeholder.com/150"]
      }
    ];
    this.searchResults = this.products;
  }
},


    
watch: {
  showModal(val) { document.body.style.overflow = val ? 'hidden' : 'auto'; },
  callModal(val) { document.body.style.overflow = val ? 'hidden' : 'auto'; },
  waModal(val) { document.body.style.overflow = val ? 'hidden' : 'auto'; },
  showLimitModal(val) { document.body.style.overflow = val ? 'hidden' : 'auto'; },
  showUpgradeModal(val) { document.body.style.overflow = val ? 'hidden' : 'auto'; },
},




  methods: {
    
openUpgradeModal() {
  this.showLimitModal = false;
  this.showUpgradeModal = true;
},






async deleteProduct(product) {
  if (!confirm(`Are you sure you want to delete "${product.title}"?`)) return;
  
  try {
    const res = await fetch(`${API.DELETE_PRODUCT}`, {
      method: 'POST', // safer with PHP backend
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ userId: this.userId, productId: product.id })
    });
    const data = await res.json();
    
    if (data.success) {
      this.showToast('âœ… Product deleted successfully', 'success');
      // Remove from local lists
      this.products = this.products.filter(p => p.id !== product.id);
      this.searchResults = this.searchResults.filter(p => p.id !== product.id);
      if (this.selectedProduct?.id === product.id) this.closeModal();
    } else {
      this.showToast(data.message || 'âŒ Failed to delete product', 'error');
    }
  } catch (err) {
    console.error('Error deleting product:', err);
    this.showToast('âš ï¸ Network error. Try again.', 'error');
  }
},


     
     



navigateTo(path) {
  this.$router.push(path);
},



 

// âœ… Universal toast method
showToast(message, type = 'success', duration = 2000) {
  this.toast.message = message;
  this.toast.type = type;
  this.toast.visible = true;
  
  clearTimeout(this.toastTimeout);
  this.toastTimeout = setTimeout(() => {
    this.toast.visible = false;
  }, duration);
},


  // Navigate carousel
  prevImage() {
      if (!this.selectedProduct.images) return;
      this.activeImageIndex = (this.activeImageIndex - 1 + this.selectedProduct.images.length) % this.selectedProduct.images.length;
    },
    nextImage() {
      if (!this.selectedProduct.images) return;
      this.activeImageIndex = (this.activeImageIndex + 1) % this.selectedProduct.images.length;
    },
    
    // View product
    viewProduct(product) {
      this.selectedProduct = product;
      this.showModal = true;
      this.activeImageIndex = 0;
    },
    closeModal() {
      this.showModal = false;
      this.selectedProduct = null;
      this.activeImageIndex = 0;
    },
    
    // Message via WhatsApp
    sendMessage() {
      if (!this.whatsappNumber) {
        this.showToast("WhatsApp number not set yet.", "error");
        return;
      }
      const number = this.normalizeNumber(this.whatsappNumber).replace('+', '');
      const text = encodeURIComponent(`Hi! I'm interested in your product: ${this.selectedProduct?.title}`);
      const url = `https://wa.me/${number}?text=${text}`;
      window.open(url, '_blank');
      this.showToast(`Opening WhatsApp chat with ${number}`, 'success', 3000);
    },
    
    // Call
    startCall() {
      if (!this.callNumber) {
        this.showToast("Call number not set yet.", "error");
        return;
      }
      const number = this.normalizeNumber(this.callNumber);
      window.location.href = `tel:${number}`;
      this.showToast(`Dialing ${number}...`, 'info', 3000);
    },
    
    
addToCart(product) {
  // Get the current cart from localStorage (or start fresh)
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  

  // Check if this product is already in the cart
  const existing = cart.find(item => item.id === product.id);
  
  if (existing) {
    // If already in cart, just increase quantity
    existing.quantity += 1;
  } else {
    // Otherwise, add new product with quantity = 1
    cart.push({ ...product, quantity: 1 });
  }
  
  // Save updated cart to localStorage
  localStorage.setItem('cart', JSON.stringify(cart));
  
  // Update Vueâ€™s reactive cart data
  this.cart = cart;
  
  // Optional: a quick user feedback
  this.showToast(`${product.title} added to cart ðŸ›’`, 'success');

},

    searchProducts() {
    clearTimeout(this.debounceTimeout);
    this.debounceTimeout = setTimeout(() => {
      if (this.searchQuery.trim().length < 1) {
        // If search bar is empty, show all
        this.searchResults = this.products;
        return;
      }
      
      const query = this.searchQuery.toLowerCase();
      this.searchResults = this.products.filter(p =>
        p.title.toLowerCase().includes(query)
      );
    }, 300);
  },
  
  
      
  
  
  


goToPost() {
if (this.postCount >= 25) {
alert('Youâ€™ve reached your free posting limit (25/25).');
} else {
this.$router.push('/post');
}
},
    openWaModal() {
      this.waModal = true;
},
    closeWaModal() {
      this.waModal = false;
},

    openCallModal() {
      this.callModal = true;
},
    closeCallModal() {
      this.callModal = false;
 },

async loadUserData() {
  const userId = localStorage.getItem('userId');
  
if (!userId) {
  console.warn('âš ï¸ No user ID found â€” user not logged in');
  this.loading = false;
  return;
}
 /* if (!this.userId) {
  this.$router.push('/login');
  return;
}
  */
  try {
    const response = await fetch(`${API.GET_USER}?userId=${encodeURIComponent(userId)}`);
    
    const result = await response.json();
    
    if (!response.ok) throw new Error(`HTTP error: ${response.status}`);
    
    if (result.success && result.data) {
      const data = result.data;
      this.brandName = data.brand_name || 'Your Brand Name';
      this.profilePreview = data.profile_image || this.defaultAvatar;
      this.whatsappNumber = data.whatsapp_number || '';
      this.callNumber = data.call_number || '';
    } else {
      console.warn('âŒ User not found or invalid data');
    }
  } catch (error) {
    console.error('ðŸš¨ Error loading user data:', error);
    
    this.showToast('Failed to load your profile. Please check your network.', 'error');
    
    
  } finally {
    this.loading = false;
  }
},


async loadProducts() {
  try {
    this.loading = true;
    
    const res = await fetch(`${API.GET_PRODUCTS}?storeId=${encodeURIComponent(this.storeId)}`);
    const data = await res.json();
    
    if (data.success) {
      
      this.products = data.data.map(p => ({
    id: p.id,
    title: p.title,
    price: p.price,
    description: p.description || "No description available.",
    images: (p.images && p.images.length > 0) // if API sends multiple images
        ? p.images.map(img => img.startsWith('http') ? img : `${API.BASE}${img}`)
        : [p.image?.startsWith('http') ? p.image : `${API.BASE}${p.image}`] // fallback single image
}));

      this.searchResults = this.products;
   this.postCount = this.products.length;
    } else {
      console.warn('âš ï¸ Failed to fetch products:', data.message);
      this.searchResults = [];
    }
  } catch (err) {
    console.error('ðŸš¨ Error loading products:', err);
    this.showToast('Network error while loading products.', 'error');
  } finally {
    this.loading = false;
  }
},



// ðŸ”§ Utility function to normalize numbers
normalizeNumber(number) {
    number = number.trim();
    
    // If user enters Nigerian format like "08012345678"
    if (/^0\d{10}$/.test(number)) {
      return '+234' + number.slice(1); // convert to +2348012345678
    }
    
    // If user enters "234..." without +
    if (/^234\d{10}$/.test(number)) {
      return '+' + number;
    }
    
    // If user already enters "+234..." or other intl format
    return number;
  },
  
  // â˜Žï¸ Save Call Number
  async saveCallNumber() {
      let number = this.normalizeNumber(this.callNumber);
      
      if (!/^\+?\d{10,15}$/.test(number)) {
      
        this.showToast('Enter a valid phone number.', 'error');
        
      }
         



         
      try {
        const res = await fetch(API.SAVE_CALL, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    userId: this.userId,
    callNumber: number,
  }),
});
        
        const data = await res.json();
        
        if (data.success) {
this.showToast('ðŸ“ž Call number saved successfully!', 'success');
 this.callNumber = number; // update field
          this.closeCallModal();
          
await this.loadUserData();
        } else {
this.showToast('âŒ Error saving call number.', 'error');
        }
      } catch (err) {
        console.error('Error saving call number:', err);
        
        
        
        this.showToast('âš ï¸ Failed to save call number.', 'error');
      }
    },
    
    // ðŸ’¬ Save WhatsApp Number
    async saveWhatsappNumber() {
      let number = this.normalizeNumber(this.whatsappNumber);
      
      if (!/^\+?\d{10,15}$/.test(number)) {
this.showToast('Enter a valid WhatsApp number.', 'error');


        return;
      }
      
      try {
const res = await fetch(API.SAVE_WHATSAPP, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    userId: this.userId,
    whatsappNumber: number,
  }),
});








        const data = await res.json();
        
        if (data.success) {
this.showToast('ðŸ’¬ WhatsApp number saved successfully!', 'success');

          this.whatsappNumber = number; // update field
          this.closeWaModal();
            
await this.loadUserData();
        } else {
          this.showToast('âŒ Error saving WhatsApp number.', 'error');
        }
      } catch (err) {
        console.error('Error saving WhatsApp number:', err);

this.showToast('âš ï¸ Failed to save WhatsApp number.', 'error');

      }
    },
    

    setTab(tabName) {
      this.activeTab = tabName;
},

    toggleSearch() {
      this.showSearch = !this.showSearch;
      this.$nextTick(() => {
        if (this.showSearch) {
          this.$refs.searchInput.focus();
}
});
},


triggerFileInput() {
  document.getElementById('fileInput').click();
},
  
  async handleProfileUpload(event) {
  const file = event.target.files[0];
  if (!file) return;
  
  // âœ… Validate file type
  if (!file.type.startsWith("image/")) {
    this.showToast("Please select a valid image file.", "error");
    return;
  }
  
  // âœ… Save old preview (in case we need to revert)
  const oldPreview = this.profilePreview;
  
  // âœ… Show instant preview (UX-friendly)
  const reader = new FileReader();
  reader.onload = (e) => {
    this.profilePreview = e.target.result;
  };
  reader.readAsDataURL(file);
  
  this.isUploading = true;
  
  // âœ… Prepare upload data
  const formData = new FormData();
  formData.append("userId", this.userId);
  formData.append("profileImage", file);
  
  try {
    const res = await fetch(API.UPLOAD_PROFILE, {
      method: "POST",
      body: formData,
    });
    
    const data = await res.json();
    
if (!data || typeof data.success === 'undefined') {
throw new Error('Invalid server response');
}
    
    if (data.success) {
      // âœ… Update preview using actual server image (real path)
      this.profilePreview = data.imageUrl || this.profilePreview;
      
      // âœ… Refresh full profile data
      await this.loadUserData();
      
      this.showToast("âœ… Profile image updated successfully!", "success");
    } else {
      // âŒ Upload failed â€” revert preview
      this.profilePreview = oldPreview;
      this.showToast(data.message || "âŒ Upload failed. Please try again.", "error");
    }
  } catch (err) {
    console.error("Upload error:", err);
    // âŒ Network error â€” revert preview
    this.profilePreview = oldPreview;
    this.showToast("âš ï¸ Network error while uploading. Try again.", "error");
  } finally {
    this.isUploading = false;
  }
},







async saveBrandName() {
  if (!this.brandName.trim()) {
    this.showToast('Brand name cannot be empty.', 'error');
    return;
  }
  
  try {
    const res = await fetch(API.SAVE_BRAND, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    userId: this.userId,
    brandName: this.brandName
  })
});
    
    const data = await res.json();
    if (data.success) {
      console.log('âœ… Brand name saved:', data);
      this.editingBrand = false;
      
await this.loadUserData();
    } else {
this.showToast('Failed to save brand name.', 'error');

    }
  } catch (err) {
    console.error('Error saving brand name:', err);
    this.showToast('Network error while saving.', 'error');
  }
}

}
  
};





/* Store Page */
const StorePage = {
  
template: `
<div v-if="store" class="top-headerX">
  <div @click="goBack">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6" />
      </svg>
  </div>
  
<img v-if="store" :src="store.logo || '/default-logo.png'" alt="Logo" class="store-logoX" />


<h3 class="nameX">{{ store.name }}</h3>
  
  <div class="icons-right">

    
    <!-- Share Icon -->
    <span class="share-icon" @click="sharePage">
      <i class="fas fa-share-alt"></i>
    </span>
  </div>
</div>




<div v-if="loading" class="loading-overlay">
  <div class="spinner"></div>
</div>


  <input 
ref="searchInput"
  type="search"
  v-model="searchQuery"
  @input="searchProducts"
  placeholder="Search for products..."
  class="search-inputX"

@focus="searchProducts"/>




  
<!-- Search Results -->
  <div v-if="searchResults.length" class="product-grid">
    
  


    <div class="product-card" v-for="product in searchResults" :key="product.id">

      <!-- Main Image -->
<img
  v-if="product.images && product.images.length"
  :src="product.images[activeImage[product.id] || 0]"
  alt="Product Image"
  class="product-img"
/>

      <!-- Thumbnails -->
      <div class="thumbnail-row">
        <img
          v-for="(img, i) in product.images"
          :key="i"
          :src="img"
          class="thumbnail"
          :class="{ active: activeImage[product.id] === i }"
          @click="activeImage[product.id] = i"
        />
      </div>

      <!-- Info -->
      <h4 class="product-title">{{ product.title }}</h4>
      <p class="product-price">â‚¦{{ product.price }}</p>

     <div class="product-actions">
     <button class="view-btn" @click="viewProduct(product)">View</button>

</div>

    </div>
  </div>
      



    
  <div v-if="showModal" class="modal-overlayX" @click.self="closeModal">
<div class="modal-contentX">

      <!-- Modal Image Display -->
<img  v-if="selectedProduct.images && selectedProduct.images.length"
        :src="selectedProduct.images[activeModalImage]"
        alt="Product Image"
        class="modal-image"
      />

      <!-- Thumbnails inside Modal -->
      <div v-if="selectedProduct.images && selectedProduct.images.length > 1" class="thumbnail-row modal-thumbs">
        <img
          v-for="(img, i) in selectedProduct.images"
          :key="i"
          :src="img"
          class="thumbnail"
          :class="{ active: activeModalImage === i }"
          @click="activeModalImage = i"
        />
      </div>

      <!-- Info -->
      <div class="info-section">
        <p><strong>Title/Name:</strong> {{ selectedProduct.title }}</p>
        <p><strong>Price:</strong> â‚¦{{ selectedProduct.price }}</p>
        
        <p><strong>Description:</strong> {{ selectedProduct.description }}</p>
      </div>

      <!-- Buttons -->
<div class="action-buttons">
 <button class="btn-primaryX" @click="sendMessage">Message</button>
 <button class="btn-callX" @click="startCall">Call</button>
 <button class="btn-closeX" @click="closeModal">Close</button>
      </div>
    </div>
  </div>
  
  
  <!-- No Results -->
  <p 
    v-else-if="searchQuery && !searchResults.length && !loading"
    class="not-foundX"
  >
    No matching products found.
  </p>
  
<div v-if="toast.visible" :class="['toast', toast.type]">
  {{ toast.message }}
</div>
`,
data() {
    return {
      // Product display control
      activeImage: {},
      activeModalImage: 0,
   
      
      // Modal
      showModal: false,
      selectedProduct: null,
      
      // Contact info
      whatsappNumber: '',
      callNumber: '',
      
      // Toast system
      toast: {
    message: '',
    type: 'success', // 'success', 'error', 'info'
    visible: false
  },
  toastTimeout: null,
  
      // Store details
store: null,
      // Core data
      
      searchResults: [],
      searchQuery: '',
      debounceTimeout: null,
      
      // Sample data (fallback before API load)
products: [
{ id: 1, title: 'Red Sneakers', price:12000, images: ['/Screenshot_20250530-185308.png','/Screenshot_20250531-052806.png', '/Screenshot_20250531-052728.png','/1000284060.png'] , description: 'Trendy sneakers for casual wear.' }, { id: 2, title: 'Blue Hoodie', price: 8000, images:
     ['/Screenshot_20250530-185601.png'], description: 'Comfortable everyday hoodie.' },
        
  { id: 3, title: 'Black Jeans', price: 15000, images: ['/Screenshot_20250530-185751.png'], description: 'Stylish black jeans for all occasions.' }, { id: 4, title: 'White T-Shirt', price: 5000, images: ['/Screenshot_20250531-052359.png'], description: 'Classic white tee.' },
        { id: 5, title: 'Green Cap', price: 3000, images: 
        ['/Screenshot_20250531-052728.png'] },
        { id: 6, title: 'Red Heels', price: 12000, images: ['/Screenshot_20250531-052806.png'] }
      ],
 //products: [],
      
      loading: false,
    };
  },
  
  mounted() {
  const savedStore = JSON.parse(localStorage.getItem('selectedStore'));
  if (savedStore) {
    this.store = savedStore;
    this.loadProducts(savedStore.slug);
  } else {
    this.showToast("No store info found. Returning to main page...", "error");
    this.$router.push("/");
  }
  
  
},

    

  watch: {
    showModal(newVal) {
      document.body.style.overflow = newVal ? 'hidden' : 'auto';
    }
  },
  
  methods: {
    /** Toast system */
    showToast(message, type = 'success', duration = 2000) {
  this.toast.message = message;
  this.toast.type = type;
  this.toast.visible = true;
  
  clearTimeout(this.toastTimeout);
  this.toastTimeout = setTimeout(() => {
    this.toast.visible = false;
  }, duration);
},
    
    /** Normalize phone numbers (for WhatsApp / call) */
    normalizeNumber(number) {
  if (!number) return '';
  number = number.replace(/[^0-9+]/g, '');
  if (number.startsWith('+')) return number;
  if (number.startsWith('0')) return '+234' + number.slice(1);
  return '+234' + number;
},

    
    /** Search functionality (debounced) */
    searchProducts() {
  clearTimeout(this.debounceTimeout);
  this.loading = true; // add this line for flicker control
  
  this.debounceTimeout = setTimeout(() => {
    const raw = this.searchQuery.trim().toLowerCase().replace(/[â‚¦,]/g, '');
    if (!raw) {
      this.searchResults = this.products;
      this.loading = false;
      return;
    }
    
    // Escape regex chars
    const escaped = raw.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    const fuzzyPattern = escaped.split('').join('.*');
    const fuzzyRegex = new RegExp(fuzzyPattern, 'i');
    
    this.searchResults = this.products.filter(p => {
      const t = p.title?.toLowerCase() || '';
      const d = p.description?.toLowerCase() || '';
      const pr = p.price?.toString() || '';
      return fuzzyRegex.test(t) || fuzzyRegex.test(d) || fuzzyRegex.test(pr);
    });
    
    this.loading = false;
  }, 300);
},

/** Fetch products (real-time API) */
async loadProducts(slug) {
  this.loading = true;
  try {

  const res = await fetch(`/get_products_by_store.php?slug=${encodeURIComponent(slug)}`);
    const data = await res.json();
    
    if (data && data.success) {
      // âœ… Update store info with logo, name, contact numbers
      this.store = {
        name: data.store.name,
        logo: data.store.logo || '/default-logo.png',
      };
      
      this.whatsappNumber = data.store.whatsapp || '';
      this.callNumber = data.store.call || '';
      
    // Load products
if (data.products?.length) {
  this.products = data.products.map(p => ({
    id: p.id,
    title: p.title,
    price: p.price,
    description: p.description || "No description available.",
    images: Array.isArray(p.images) && p.images.length ? p.images : ['/default-product.png'],
  }));
} else {
        this.products = [
          { id: 1, title: 'Sample Product 1', price: 5000, images: ['/sample1.png'], description: 'Sample description.' },
          { id: 2, title: 'Sample Product 2', price: 9000, images: ['/sample2.png'], description: 'Another sample.' }
        ];
      }
      
      this.searchResults = this.products;
    } else {
      this.showToast("Failed to load store details.", "error");
    }
  } catch (err) {
    console.error(err);
    this.showToast("Network error while loading products.", "error");
  } finally {
    this.loading = false;
  }
},

    /** Product modal navigation */
    prevImage() {
    if (!this.selectedProduct?.images) return;
    this.activeModalImage =
      (this.activeModalImage - 1 + this.selectedProduct.images.length) %
      this.selectedProduct.images.length;
  },
  nextImage() {
    if (!this.selectedProduct?.images) return;
    this.activeModalImage =
      (this.activeModalImage + 1) % this.selectedProduct.images.length;
  },
    
    /** Modal control */
    viewProduct(product) {
    this.selectedProduct = product;
    this.showModal = true;
    this.activeModalImage = 0; // fixed
  },
  closeModal() {
    this.showModal = false;
    this.selectedProduct = null;
    this.activeModalImage = 0; // fixed
  },
    
    /** Messaging / Call */
    sendMessage() {
      if (!this.whatsappNumber) {
        this.showToast("WhatsApp number not set yet.", "error");
        return;
      }
      const number = this.normalizeNumber(this.whatsappNumber).replace('+', '');
      const text = encodeURIComponent(`Hi! I'm interested in your product: ${this.selectedProduct?.title}`);
      const url = `https://wa.me/${number}?text=${text}`;
      window.open(url, '_blank');
      this.showToast(`Opening WhatsApp chat with ${number}`, 'success', 3000);
    },
    
    startCall() {
      if (!this.callNumber) {
        this.showToast("Call number not set yet.", "error");
        return;
      }
      const number = this.normalizeNumber(this.callNumber);
      window.location.href = `tel:${number}`;
      this.showToast(`Dialing ${number}...`, 'info', 3000);
    },
    
  
    
    
    /** Navigation */
    goBack() {
      this.$router.back();
    },


    
    /** Share page handler */
    sharePage() {
      const platformName = "Microcart";
      const brandName = this.store.name;
      const pageURL = window.location.href;
      const shareText = `${platformName}/${brandName} - Check out this store: ${pageURL}`;
      
      if (navigator.share) {
        navigator.share({
            title: `${platformName} Store`,
            text: shareText,
            url: pageURL
          })
          .then(() => console.log("Shared successfully"))
          .catch(err => console.error("Share failed:", err));
      } else {
        navigator.clipboard.writeText(shareText)
  .then(() => this.showToast("Store link copied to clipboard!", "success"))
  .catch(() => this.showToast("Failed to copy link", "error"));
      }
    },
    
    /** Focus on search bar */
    focusSearch() {
      this.$refs.searchInput && this.$refs.searchInput.focus();
    },
  }
};







const routes = 
 [
{ path: '/', component: AlphaPage },

{ path: '/ham1', component: Ham1Page },

//{ path: '/', component: Ham2Page },

{  path: '/ham2', component: Ham2Page,
  beforeEnter: (to, from, next) => {
    if (!localStorage.getItem('userId')) {
      next('/login');
    } else {
      next();
    }
  }
},



{ path: '/signup', component: SignupPage},
  
{ path: '/login', component: LoginPage},
  
{ path: '/upgrade', component: UpgradePage },
   
{ path: '/faq', component: FAQsPage },
    
{ path: '/support', component: CustomerCarePage },
  
{ path: '/about', component: AboutUsPage},
     
{ path: '/donate', component: DonationPage },
  
{ path: '/store/:slug', component: StorePage },
 

{ path: '/profile', component: ProfilePage },
      

{ path: '/post', component: PostPage },
     
     
 //Microcart Admin
/* { path: "/seller-dashboard-x9t4mc", component: DashboardPage }
*/
      ];

    const router = VueRouter.createRouter({
      history: VueRouter.createWebHashHistory(),
      routes
    });

    const app = Vue.createApp({});
    app.use(router);
    app.mount('#app');
  </script>
</body>
</html>



